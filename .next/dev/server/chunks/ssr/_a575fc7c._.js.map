{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/cn\";\n\nexport function Card({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"rounded-md border border-border bg-card text-card-foreground shadow-sm\", className)} {...props} />;\n}\n\nexport function CardHeader({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"p-6 pb-2\", className)} {...props} />;\n}\n\nexport function CardTitle({ className, ...props }: React.HTMLAttributes<HTMLHeadingElement>) {\n  return <h3 className={cn(\"text-lg font-semibold tracking-tight\", className)} {...props} />;\n}\n\nexport function CardContent({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"p-6 pt-4\", className)} {...props} />;\n}\n"],"names":[],"mappings":";;;;;;;;;;;AACA;;;AAEO,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAA6C;IAChF,qBAAO,8OAAC;QAAI,WAAW,IAAA,+GAAE,EAAC,0EAA0E;QAAa,GAAG,KAAK;;;;;;AAC3H;AAEO,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAA6C;IACtF,qBAAO,8OAAC;QAAI,WAAW,IAAA,+GAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAC7D;AAEO,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAiD;IACzF,qBAAO,8OAAC;QAAG,WAAW,IAAA,+GAAE,EAAC,wCAAwC;QAAa,GAAG,KAAK;;;;;;AACxF;AAEO,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAA6C;IACvF,qBAAO,8OAAC;QAAI,WAAW,IAAA,+GAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAC7D"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/core/scenarioStore.ts"],"sourcesContent":["import type { Scenario } from \"./scenarioTypes\";\n\nconst KEY = \"loancursor_last_scenario\";\n\nexport function defaultScenario(): Scenario {\n  return {\n    loanType: \"DSCR\",\n    purpose: \"Purchase\",\n    propertyValue: 600000,\n    loanAmount: 450000,\n    ltv: 75,\n    fico: 720,\n\n    rentMonthly: 4500,\n    propertyTaxAnnual: 7200,\n    hoaMonthly: 0,\n\n    qualifyingRate: 8.25,\n    dscr: 0,\n\n    state: \"FL\",\n    propertyType: \"SFR\",\n    occupancy: \"Investment\",\n    lienPosition: \"First\",\n    reservesMonths: 6,\n    unitCount: 2,\n\n    condoWarrantable: true,\n    isSTR: false,\n    decliningMarket: false,\n\n    interestOnly: false,\n    ioYears: 10,\n\n    amortizationYears: 30, // ✅ THIS was missing\n\n    prepayType: \"None\",\n    prepayTerm: 5,\n\n    entity: \"Entity\",\n\n    useAllLenders: true,\n    selectedLenderIds: [],\n  };\n}\n\nexport function validateScenario(\n  s: Scenario\n): { ok: true } | { ok: false; error: string } {\n  // --- State ---\n  if (!s.state || s.state.trim().length !== 2) {\n    return { ok: false, error: \"State must be a 2-letter code (e.g. FL).\" };\n  }\n\n  // --- Property & Loan ---\n  if (!s.occupancy) {\n    return { ok: false, error: \"Select an occupancy type.\" };\n  }\n  if (!s.lienPosition) {\n    return { ok: false, error: \"Select a lien position.\" };\n  }\n\n  if (s.propertyType === \"2-4Unit\") {\n    const u = Number(s.unitCount);\n    if (![2, 3, 4].includes(u)) {\n      return { ok: false, error: \"For 2–4 Unit properties, select the number of units (2, 3, or 4).\" };\n    }\n  }\n\n  if (!Number.isFinite(s.propertyValue) || s.propertyValue <= 0) {\n    return { ok: false, error: \"Property value must be greater than 0.\" };\n  }\n\n  if (!Number.isFinite(s.loanAmount) || s.loanAmount <= 0) {\n    return { ok: false, error: \"Loan amount must be greater than 0.\" };\n  }\n\n  if (s.loanAmount > s.propertyValue) {\n    return { ok: false, error: \"Loan amount cannot exceed property value.\" };\n  }\n\n  if (!Number.isFinite(s.ltv) || s.ltv <= 0 || s.ltv > 100) {\n    return { ok: false, error: \"LTV must be between 1 and 100.\" };\n  }\n\n  // --- Credit ---\n  if (!Number.isFinite(s.fico) || s.fico < 300 || s.fico > 850) {\n    return { ok: false, error: \"Credit score must be between 300 and 850.\" };\n  }\n\n  // --- Income / DSCR inputs ---\n  if (!Number.isFinite(s.rentMonthly) || s.rentMonthly <= 0) {\n    return { ok: false, error: \"Monthly rent must be greater than 0.\" };\n  }\n\n  if (!Number.isFinite(s.propertyTaxAnnual) || s.propertyTaxAnnual < 0) {\n    return { ok: false, error: \"Annual property tax must be 0 or greater.\" };\n  }\n\n  if (!Number.isFinite(s.hoaMonthly) || s.hoaMonthly < 0) {\n    return { ok: false, error: \"Monthly HOA must be 0 or greater.\" };\n  }\n\n  // --- Reserves (optional) ---\n  if (s.reservesMonths != null) {\n    const rm = Number(s.reservesMonths);\n    if (!Number.isFinite(rm) || rm < 0 || rm > 36) {\n      return { ok: false, error: \"Reserves months must be between 0 and 36.\" };\n    }\n  }\n\n  // --- Qualifying rate (for DSCR calc) ---\n  if (!Number.isFinite(s.qualifyingRate) || s.qualifyingRate <= 0 || s.qualifyingRate > 20) {\n    return { ok: false, error: \"Qualifying rate must be a valid percentage.\" };\n  }\n\n  // --- DSCR (computed, but still sanity-checked) ---\n  if (!Number.isFinite(s.dscr) || s.dscr <= 0) {\n    return { ok: false, error: \"DSCR could not be calculated. Check rent, expenses, and loan terms.\" };\n  }\n\n  \n// --- Interest-only structure ---\nif (s.interestOnly) {\n  const io = Number(s.ioYears);\n  if (![5, 7, 10].includes(io)) {\n    return { ok: false, error: \"Select an Interest-Only structure (5, 7, or 10 years IO).\" };\n  }\n}\n\n// --- PPP logic sanity ---\n  if (s.prepayType !== \"None\") {\n    if (!Number.isFinite(s.prepayTerm) || s.prepayTerm < 1 || s.prepayTerm > 7) {\n      return { ok: false, error: \"Prepayment penalty term must be between 1 and 7 years.\" };\n    }\n  } \n\n  return { ok: true };\n}\n\nexport function saveScenario(s: Scenario) {\n  try {\n    localStorage.setItem(KEY, JSON.stringify(s));\n  } catch {\n    // ignore\n  }\n}\n\nexport function getScenario(): Scenario {\n  try {\n    const raw = localStorage.getItem(KEY);\n    if (!raw) return defaultScenario();\n    const parsed = JSON.parse(raw) as Partial<Scenario>;\n    return { ...defaultScenario(), ...parsed };\n  } catch {\n    return defaultScenario();\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA,MAAM,MAAM;AAEL,SAAS;IACd,OAAO;QACL,UAAU;QACV,SAAS;QACT,eAAe;QACf,YAAY;QACZ,KAAK;QACL,MAAM;QAEN,aAAa;QACb,mBAAmB;QACnB,YAAY;QAEZ,gBAAgB;QAChB,MAAM;QAEN,OAAO;QACP,cAAc;QACd,WAAW;QACX,cAAc;QACd,gBAAgB;QAChB,WAAW;QAEX,kBAAkB;QAClB,OAAO;QACP,iBAAiB;QAEjB,cAAc;QACd,SAAS;QAET,mBAAmB;QAEnB,YAAY;QACZ,YAAY;QAEZ,QAAQ;QAER,eAAe;QACf,mBAAmB,EAAE;IACvB;AACF;AAEO,SAAS,iBACd,CAAW;IAEX,gBAAgB;IAChB,IAAI,CAAC,EAAE,KAAK,IAAI,EAAE,KAAK,CAAC,IAAI,GAAG,MAAM,KAAK,GAAG;QAC3C,OAAO;YAAE,IAAI;YAAO,OAAO;QAA2C;IACxE;IAEA,0BAA0B;IAC1B,IAAI,CAAC,EAAE,SAAS,EAAE;QAChB,OAAO;YAAE,IAAI;YAAO,OAAO;QAA4B;IACzD;IACA,IAAI,CAAC,EAAE,YAAY,EAAE;QACnB,OAAO;YAAE,IAAI;YAAO,OAAO;QAA0B;IACvD;IAEA,IAAI,EAAE,YAAY,KAAK,WAAW;QAChC,MAAM,IAAI,OAAO,EAAE,SAAS;QAC5B,IAAI,CAAC;YAAC;YAAG;YAAG;SAAE,CAAC,QAAQ,CAAC,IAAI;YAC1B,OAAO;gBAAE,IAAI;gBAAO,OAAO;YAAoE;QACjG;IACF;IAEA,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,aAAa,KAAK,EAAE,aAAa,IAAI,GAAG;QAC7D,OAAO;YAAE,IAAI;YAAO,OAAO;QAAyC;IACtE;IAEA,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,UAAU,KAAK,EAAE,UAAU,IAAI,GAAG;QACvD,OAAO;YAAE,IAAI;YAAO,OAAO;QAAsC;IACnE;IAEA,IAAI,EAAE,UAAU,GAAG,EAAE,aAAa,EAAE;QAClC,OAAO;YAAE,IAAI;YAAO,OAAO;QAA4C;IACzE;IAEA,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,GAAG,KAAK,EAAE,GAAG,IAAI,KAAK,EAAE,GAAG,GAAG,KAAK;QACxD,OAAO;YAAE,IAAI;YAAO,OAAO;QAAiC;IAC9D;IAEA,iBAAiB;IACjB,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,IAAI,KAAK,EAAE,IAAI,GAAG,OAAO,EAAE,IAAI,GAAG,KAAK;QAC5D,OAAO;YAAE,IAAI;YAAO,OAAO;QAA4C;IACzE;IAEA,+BAA+B;IAC/B,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,WAAW,KAAK,EAAE,WAAW,IAAI,GAAG;QACzD,OAAO;YAAE,IAAI;YAAO,OAAO;QAAuC;IACpE;IAEA,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,iBAAiB,KAAK,EAAE,iBAAiB,GAAG,GAAG;QACpE,OAAO;YAAE,IAAI;YAAO,OAAO;QAA4C;IACzE;IAEA,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,UAAU,KAAK,EAAE,UAAU,GAAG,GAAG;QACtD,OAAO;YAAE,IAAI;YAAO,OAAO;QAAoC;IACjE;IAEA,8BAA8B;IAC9B,IAAI,EAAE,cAAc,IAAI,MAAM;QAC5B,MAAM,KAAK,OAAO,EAAE,cAAc;QAClC,IAAI,CAAC,OAAO,QAAQ,CAAC,OAAO,KAAK,KAAK,KAAK,IAAI;YAC7C,OAAO;gBAAE,IAAI;gBAAO,OAAO;YAA4C;QACzE;IACF;IAEA,0CAA0C;IAC1C,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,cAAc,KAAK,EAAE,cAAc,IAAI,KAAK,EAAE,cAAc,GAAG,IAAI;QACxF,OAAO;YAAE,IAAI;YAAO,OAAO;QAA8C;IAC3E;IAEA,oDAAoD;IACpD,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,IAAI,KAAK,EAAE,IAAI,IAAI,GAAG;QAC3C,OAAO;YAAE,IAAI;YAAO,OAAO;QAAsE;IACnG;IAGF,kCAAkC;IAClC,IAAI,EAAE,YAAY,EAAE;QAClB,MAAM,KAAK,OAAO,EAAE,OAAO;QAC3B,IAAI,CAAC;YAAC;YAAG;YAAG;SAAG,CAAC,QAAQ,CAAC,KAAK;YAC5B,OAAO;gBAAE,IAAI;gBAAO,OAAO;YAA4D;QACzF;IACF;IAEA,2BAA2B;IACzB,IAAI,EAAE,UAAU,KAAK,QAAQ;QAC3B,IAAI,CAAC,OAAO,QAAQ,CAAC,EAAE,UAAU,KAAK,EAAE,UAAU,GAAG,KAAK,EAAE,UAAU,GAAG,GAAG;YAC1E,OAAO;gBAAE,IAAI;gBAAO,OAAO;YAAyD;QACtF;IACF;IAEA,OAAO;QAAE,IAAI;IAAK;AACpB;AAEO,SAAS,aAAa,CAAW;IACtC,IAAI;QACF,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;IAC3C,EAAE,OAAM;IACN,SAAS;IACX;AACF;AAEO,SAAS;IACd,IAAI;QACF,MAAM,MAAM,aAAa,OAAO,CAAC;QACjC,IAAI,CAAC,KAAK,OAAO;QACjB,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,OAAO;YAAE,GAAG,iBAAiB;YAAE,GAAG,MAAM;QAAC;IAC3C,EAAE,OAAM;QACN,OAAO;IACT;AACF"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/core/lenders.ts"],"sourcesContent":["import type { LoanType, Purpose, PropertyType, Scenario } from \"./scenarioTypes\";\n\nexport type LenderRule = {\n  id: string;\n  name: string;\n  tagline: string;\n\n  /** Which loan types this lender supports (e.g. DSCR) */\n  loanTypes: LoanType[];\n\n  /** Which purposes this lender supports (Purchase / Refi / CashOutRefi) */\n  purposes: Purpose[];\n\n  // --- Hard constraints (baseline / generic) ---\n  minFico: number;\n\n  /** Default max LTV if a more specific rule isn't provided */\n  maxLtv: number;\n\n  /** Optional: max LTV by purpose */\n  maxLtvByPurpose?: Partial<Record<Purpose, number>>;\n\n  /** Optional: cash-out max LTV tiers by FICO (evaluated highest minFico first) */\n  cashOutMaxLtvByFico?: { minFico: number; maxLtv: number; note?: string }[];\n\n  excludedStates?: string[];\n\n  allowedPropertyTypes?: PropertyType[];\n  disallowInterestOnly?: boolean;\n\n  /** Condo overlay (only used when propertyType === Condo) */\n  condoNonWarrantableMaxLtv?: number;\n\n  /** V1.5 market overlay */\n  decliningMarketLtvHit?: number; // subtract from max eligible LTV if scenario.decliningMarket === true\n\n  // --- DSCR constraints ---\n  /** Baseline DSCR minimum (if no tiers apply) */\n  minDscr?: number;\n\n  /** Optional: DSCR tiers by LTV (useful for \"Expanded\" style programs) */\n  dscrTiers?: { maxLtv: number; minDscr: number; note?: string }[];\n\n  /** Optional: STR overlay */\n  strMinDscr?: number;\n\n  // --- Base pricing (simple, realistic placeholders for V1.5) ---\n  baseRate: number;   // percent, e.g. 7.875\n  basePoints: number; // points, e.g. 1.25\n\n  // --- Pricing adjustments (rateAdd in percent; pointsAdd in points) ---\n  adjustments: {\n    ltv: { max: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    fico: { min: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    dscr?: { min: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    state?: { states: string[]; rateAdd: number; pointsAdd: number; note?: string }[];\n    io?: { when: \"Yes\" | \"No\"; rateAdd: number; pointsAdd: number; note?: string }[];\n    ppp?: { term: number; rateAdd: number; pointsAdd: number; note?: string }[];\n  };\n\n  strengths: string[];\n  avoidWhen: string[];\n};\n\n/**\n * Built-in reference lenders for V1.5.\n *\n * IMPORTANT:\n * - These are NOT \"live pricing\". They are reference configurations to validate the engine.\n * - Next step (forward vision): move these configs into Supabase and version them by effective date.\n */\nexport const lenders: LenderRule[] = [\n  {\n    id: \"bpl_standard\",\n    name: \"BPL – Standard\",\n    tagline: \"Conservative DSCR lane with simple overlays.\",\n    loanTypes: [\"DSCR\"],\n    purposes: [\"Purchase\", \"Refi\", \"CashOutRefi\"],\n\n    minFico: 680,\n\n    // Default caps\n    maxLtv: 80,\n    maxLtvByPurpose: {\n      Purchase: 80,\n      Refi: 80,\n      CashOutRefi: 75,\n    },\n    // Cash-out tiers by FICO (mirrors common sheet behavior)\n    cashOutMaxLtvByFico: [\n      { minFico: 700, maxLtv: 75, note: \"Cash-out tier (700+)\" },\n      { minFico: 680, maxLtv: 70, note: \"Cash-out tier (<700)\" },\n    ],\n\n    excludedStates: [],\n    allowedPropertyTypes: [\"SFR\", \"Condo\", \"2-4Unit\"],\n    disallowInterestOnly: false,\n\n    condoNonWarrantableMaxLtv: 70, // Standard is typically tighter on condos (placeholder)\n    decliningMarketLtvHit: 5,\n\n    // DSCR requirement: based on FICO (simplified from sheet language)\n    minDscr: 1.2, // for <720\n    // We'll enforce 1.0 for 720+ inside the engine notes/logic.\n\n    baseRate: 8.250,\n    basePoints: 1.25,\n\n    adjustments: {\n      ltv: [\n        { max: 65, rateAdd: -0.125, pointsAdd: -0.25, note: \"Low LTV credit\" },\n        { max: 70, rateAdd: 0.0, pointsAdd: 0.0 },\n        { max: 75, rateAdd: 0.125, pointsAdd: 0.25 },\n        { max: 80, rateAdd: 0.250, pointsAdd: 0.50, note: \"High LTV add\" },\n      ],\n      fico: [\n        { min: 760, rateAdd: -0.125, pointsAdd: -0.25 },\n        { min: 720, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 700, rateAdd: 0.125, pointsAdd: 0.25 },\n        { min: 680, rateAdd: 0.250, pointsAdd: 0.50 },\n      ],\n      dscr: [\n        { min: 1.35, rateAdd: -0.100, pointsAdd: -0.10 },\n        { min: 1.20, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 1.00, rateAdd: 0.100, pointsAdd: 0.10 },\n      ],\n      state: [],\n      io: [\n        { when: \"Yes\", rateAdd: 0.125, pointsAdd: 0.25, note: \"Interest-only add\" },\n        { when: \"No\", rateAdd: 0.0, pointsAdd: 0.0 },\n      ],\n      // PPP: base assumes 5-year; 3-year adds rate (from sheet language). Keep others neutral for now.\n      ppp: [\n        { term: 5, rateAdd: 0.0, pointsAdd: 0.0, note: \"Base assumes 5-yr PPP\" },\n        { term: 3, rateAdd: 0.375, pointsAdd: 0.0, note: \"3-yr PPP add\" },\n      ],\n    },\n\n    strengths: [\"Straightforward DSCR lane\", \"Predictable overlays\", \"Good for clean deals\"],\n    avoidWhen: [\"Borderline DSCR with high LTV\", \"Tight condos / special property types\"],\n  },\n\n  {\n    id: \"bpl_expanded\",\n    name: \"BPL – Expanded\",\n    tagline: \"More flexible DSCR with tiered DSCR and overlays.\",\n    loanTypes: [\"DSCR\"],\n    purposes: [\"Purchase\", \"Refi\", \"CashOutRefi\"],\n\n    minFico: 660,\n\n    maxLtv: 80,\n    maxLtvByPurpose: {\n      Purchase: 80,\n      Refi: 80,\n      CashOutRefi: 75,\n    },\n\n    excludedStates: [\"ND\", \"NV\", \"SD\"],\n    allowedPropertyTypes: [\"SFR\", \"Condo\", \"2-4Unit\"],\n    disallowInterestOnly: false,\n\n    condoNonWarrantableMaxLtv: 65,\n    decliningMarketLtvHit: 5,\n\n    // DSCR tiers by LTV (Expanded-style behavior)\n    dscrTiers: [\n      { maxLtv: 65, minDscr: 0.75, note: \"≤65 LTV DSCR tier\" },\n      { maxLtv: 80, minDscr: 1.0, note: \"65.01–80 LTV DSCR tier\" },\n    ],\n    strMinDscr: 1.15,\n\n    baseRate: 7.875,\n    basePoints: 1.75,\n\n    adjustments: {\n      ltv: [\n        { max: 65, rateAdd: -0.125, pointsAdd: -0.25, note: \"Low LTV credit\" },\n        { max: 70, rateAdd: 0.0, pointsAdd: 0.0 },\n        { max: 75, rateAdd: 0.125, pointsAdd: 0.25 },\n        { max: 80, rateAdd: 0.250, pointsAdd: 0.50, note: \"High LTV add\" },\n      ],\n      fico: [\n        { min: 760, rateAdd: -0.125, pointsAdd: -0.25 },\n        { min: 720, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 700, rateAdd: 0.125, pointsAdd: 0.25 },\n        { min: 660, rateAdd: 0.250, pointsAdd: 0.50 },\n      ],\n      dscr: [\n        { min: 1.35, rateAdd: -0.100, pointsAdd: -0.10 },\n        { min: 1.15, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 1.00, rateAdd: 0.100, pointsAdd: 0.10 },\n        { min: 0.75, rateAdd: 0.200, pointsAdd: 0.20, note: \"Low DSCR add\" },\n      ],\n      state: [\n        { states: [\"NY\", \"NJ\"], rateAdd: 0.05, pointsAdd: 0.05, note: \"State add (example)\" },\n      ],\n      io: [\n        { when: \"Yes\", rateAdd: 0.125, pointsAdd: 0.25, note: \"Interest-only add\" },\n        { when: \"No\", rateAdd: 0.0, pointsAdd: 0.0 },\n      ],\n      ppp: [\n        { term: 5, rateAdd: 0.0, pointsAdd: 0.0, note: \"Base assumes 5-yr PPP\" },\n        { term: 3, rateAdd: 0.250, pointsAdd: 0.0, note: \"3-yr PPP add\" },\n        { term: 2, rateAdd: 0.375, pointsAdd: 0.0, note: \"2-yr PPP add\" },\n        { term: 1, rateAdd: 0.500, pointsAdd: 0.0, note: \"1-yr PPP add\" },\n      ],\n    },\n\n    strengths: [\"Tiered DSCR options\", \"STR capable (with higher DSCR)\", \"More flexible overlays\"],\n    avoidWhen: [\"Excluded states (ND/NV/SD)\", \"Non-warrantable condos over 65 LTV\"],\n  },\n];\n\n/** Helper used in the engine: compute max eligible LTV for a lender given a scenario. */\nexport function maxEligibleLtvForScenario(l: LenderRule, s: Scenario): { maxLtv: number; notes: string[] } {\n  const notes: string[] = [];\n\n  let maxLtv = l.maxLtvByPurpose?.[s.purpose] ?? l.maxLtv;\n\n  // Cash-out tiers by FICO (if provided)\n  if (s.purpose === \"CashOutRefi\" && l.cashOutMaxLtvByFico?.length) {\n    const rows = [...l.cashOutMaxLtvByFico].sort((a, b) => b.minFico - a.minFico);\n    const row = rows.find((r) => s.fico >= r.minFico) ?? rows[rows.length - 1];\n    maxLtv = Math.min(maxLtv, row.maxLtv);\n    if (row.note) notes.push(row.note);\n  }\n\n  // Condo overlay: non-warrantable cap\n  if (s.propertyType === \"Condo\" && !s.condoWarrantable && typeof l.condoNonWarrantableMaxLtv === \"number\") {\n    maxLtv = Math.min(maxLtv, l.condoNonWarrantableMaxLtv);\n    notes.push(`Non-warrantable condo max LTV ${l.condoNonWarrantableMaxLtv}%`);\n  }\n\n  // Declining market overlay: reduce LTV cap\n  if (s.decliningMarket && typeof l.decliningMarketLtvHit === \"number\" && l.decliningMarketLtvHit > 0) {\n    maxLtv = Math.max(0, maxLtv - l.decliningMarketLtvHit);\n    notes.push(`Declining market: −${l.decliningMarketLtvHit}% max LTV`);\n  }\n\n  return { maxLtv, notes };\n}\n\n/** Helper used in the engine: compute DSCR minimum for a lender given a scenario. */\nexport function minDscrForScenario(l: LenderRule, s: Scenario): { minDscr: number; notes: string[] } {\n  const notes: string[] = [];\n\n  // STR overlay\n  if (s.isSTR && typeof l.strMinDscr === \"number\") {\n    notes.push(`STR min DSCR ${l.strMinDscr}`);\n    return { minDscr: l.strMinDscr, notes };\n  }\n\n  // Tiered DSCR by LTV\n  if (l.dscrTiers?.length) {\n    const row =\n      l.dscrTiers.find((t) => s.ltv <= t.maxLtv) ??\n      l.dscrTiers[l.dscrTiers.length - 1];\n\n    if (row.note) notes.push(row.note);\n    return { minDscr: row.minDscr, notes };\n  }\n\n  // BPL Standard special: 720+ lowers DSCR requirement (captured here without custom functions)\n  if (l.id === \"bpl_standard\") {\n    if (s.fico >= 720) return { minDscr: 1.0, notes: [\"FICO 720+ DSCR tier\"] };\n    return { minDscr: 1.2, notes: [\"FICO <720 DSCR tier\"] };\n  }\n\n  return { minDscr: l.minDscr ?? 0, notes };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 674, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/core/engine.ts"],"sourcesContent":["import type { Scenario } from \"./scenarioTypes\";\nimport type { LenderRule } from \"./lenders\";\nimport { maxEligibleLtvForScenario, minDscrForScenario } from \"./lenders\";\n\nexport type PricingBreakdownRow = {\n  label: string;\n  rateDelta: number;\n  pointsDelta: number;\n  note?: string;\n};\n\nexport type PricingResult = {\n  lenderId: string;\n  lenderName: string;\n\n  eligible: boolean;\n\n  // Base + adjustments (only meaningful when eligible)\n  baseRate: number;\n  basePoints: number;\n  rate: number;\n  points: number;\n\n  breakdown: PricingBreakdownRow[];\n\n  // Notes always available; for ineligible results these are disqualifiers.\n  notes: string[];\n};\n\nfunction matchLtvAdj(rule: LenderRule, ltv: number) {\n  const row =\n    rule.adjustments.ltv.find((r) => ltv <= r.max) ??\n    rule.adjustments.ltv[rule.adjustments.ltv.length - 1];\n  return row;\n}\n\nfunction matchFicoAdj(rule: LenderRule, fico: number) {\n  const rows = [...rule.adjustments.fico].sort((a, b) => b.min - a.min);\n  const row = rows.find((r) => fico >= r.min) ?? rows[rows.length - 1];\n  return row;\n}\n\nfunction matchDscrAdj(rule: LenderRule, dscr: number) {\n  const rows = (rule.adjustments.dscr ?? []).slice().sort((a, b) => b.min - a.min);\n  const row = rows.find((r) => dscr >= r.min);\n  return row ?? null;\n}\n\nfunction matchStateAdj(rule: LenderRule, state: string) {\n  const rows = rule.adjustments.state ?? [];\n  return rows.find((r) => r.states.includes(state.toUpperCase())) ?? null;\n}\n\nfunction matchPppAdj(rule: LenderRule, term: number) {\n  const rows = rule.adjustments.ppp ?? [];\n  return rows.find((r) => r.term === term) ?? null;\n}\n\nexport function evaluateScenario(s: Scenario, lenderRules: LenderRule[]): PricingResult[] {\n  const state = (s.state || \"\").toUpperCase();\n\n  const results: PricingResult[] = lenderRules.map((l) => {\n    const notes: string[] = [];\n    let eligible = true;\n\n    // --- Eligibility checks (deterministic) ---\n    if (!l.loanTypes.includes(s.loanType)) {\n      eligible = false;\n      notes.push(\"Loan type not offered\");\n    }\n\n    if (eligible && !l.purposes.includes(s.purpose)) {\n      eligible = false;\n      notes.push(\"Purpose not offered\");\n    }\n\n    if (eligible && s.fico < l.minFico) {\n      eligible = false;\n      notes.push(`FICO < ${l.minFico}`);\n    }\n\n    if (eligible && l.allowedPropertyTypes?.length && !l.allowedPropertyTypes.includes(s.propertyType)) {\n      eligible = false;\n      notes.push(\"Property type not allowed\");\n    }\n\n    // max LTV (with overlays)\n    const { maxLtv, notes: maxLtvNotes } = maxEligibleLtvForScenario(l, s);\n    if (eligible) notes.push(...maxLtvNotes);\n    if (eligible && s.ltv > maxLtv) {\n      eligible = false;\n      notes.push(`LTV > ${maxLtv}`);\n    }\n\n    if (eligible && l.excludedStates?.includes(state)) {\n      eligible = false;\n      notes.push(`State excluded (${state})`);\n    }\n\n    if (eligible && l.disallowInterestOnly && s.interestOnly) {\n      eligible = false;\n      notes.push(\"Interest-only not allowed\");\n    }\n\n    // DSCR\n    if (eligible && s.loanType === \"DSCR\") {\n      const { minDscr, notes: dscrNotes } = minDscrForScenario(l, s);\n      notes.push(...dscrNotes);\n      if (s.dscr < minDscr) {\n        eligible = false;\n        notes.push(`DSCR ${s.dscr.toFixed(2)} < ${minDscr.toFixed(2)}`);\n      }\n    }\n\n    // Ineligible: return with only notes\n    if (!eligible) {\n      return {\n        lenderId: l.id,\n        lenderName: l.name,\n        eligible: false,\n        baseRate: l.baseRate,\n        basePoints: l.basePoints,\n        rate: l.baseRate,\n        points: l.basePoints,\n        breakdown: [],\n        notes,\n      };\n    }\n\n    // --- Pricing (base + simple adjustments) ---\n    const breakdown: PricingBreakdownRow[] = [];\n    let rate = l.baseRate;\n    let points = l.basePoints;\n\n    const addRow = (label: string, rateDelta: number, pointsDelta: number, note?: string) => {\n      if (rateDelta === 0 && pointsDelta === 0 && !note) return;\n      breakdown.push({ label, rateDelta, pointsDelta, note });\n      rate += rateDelta;\n      points += pointsDelta;\n    };\n\n    // LTV band\n    const ltvAdj = matchLtvAdj(l, s.ltv);\n    addRow(\"LTV band\", ltvAdj.rateAdd, ltvAdj.pointsAdd, ltvAdj.note);\n\n    // FICO tier\n    const ficoAdj = matchFicoAdj(l, s.fico);\n    addRow(\"FICO tier\", ficoAdj.rateAdd, ficoAdj.pointsAdd, ficoAdj.note);\n\n    // DSCR tier (if provided)\n    if (s.loanType === \"DSCR\") {\n      const dscrAdj = matchDscrAdj(l, s.dscr);\n      if (dscrAdj) addRow(\"DSCR tier\", dscrAdj.rateAdd, dscrAdj.pointsAdd, dscrAdj.note);\n    }\n\n    // State add (optional)\n    const stateAdj = matchStateAdj(l, state);\n    if (stateAdj) addRow(\"State\", stateAdj.rateAdd, stateAdj.pointsAdd, stateAdj.note);\n\n    // IO add (optional)\n    const ioRows = l.adjustments.io ?? [];\n    const ioAdj = ioRows.find((r) => r.when === (s.interestOnly ? \"Yes\" : \"No\")) ?? null;\n    if (ioAdj) addRow(\"Interest-only\", ioAdj.rateAdd, ioAdj.pointsAdd, ioAdj.note);\n\n    // PPP add (optional; only apply when PPP is not None)\n    if (s.prepayType !== \"None\") {\n      const pppAdj = matchPppAdj(l, s.prepayTerm);\n      if (pppAdj) addRow(\"PPP term\", pppAdj.rateAdd, pppAdj.pointsAdd, pppAdj.note);\n    }\n\n    // Round for presentation\n    rate = Math.round(rate * 1000) / 1000;\n    points = Math.round(points * 1000) / 1000;\n\n    // Notes: keep eligibility notes + pricing context\n    const pricingNotes: string[] = [];\n    if (s.prepayType === \"None\") pricingNotes.push(\"No PPP selected\");\n    else pricingNotes.push(`${s.prepayType} PPP, ${s.prepayTerm}yr`);\n\n    return {\n      lenderId: l.id,\n      lenderName: l.name,\n      eligible: true,\n      baseRate: l.baseRate,\n      basePoints: l.basePoints,\n      rate,\n      points,\n      breakdown,\n      notes: [...notes, ...pricingNotes],\n    };\n  });\n\n  // Eligible first, then best rate, then points\n  const eligible = results.filter((r) => r.eligible).sort((a, b) => a.rate - b.rate || a.points - b.points);\n  const ineligible = results.filter((r) => !r.eligible).sort((a, b) => a.lenderName.localeCompare(b.lenderName));\n  return [...eligible, ...ineligible];\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 836, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/lib/lendersStore.ts"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { lenders as builtInLenders, type LenderRule } from \"@/core/lenders\";\n\nconst STORAGE_KEY = \"loancursor.customLenders.v2\";\n\nfunction safeParse(jsonStr: string): unknown {\n  try { return JSON.parse(jsonStr); } catch { return null; }\n}\n\nexport function loadCustomLenders(): LenderRule[] {\n  if (typeof window === \"undefined\") return [];\n  const raw = window.localStorage.getItem(STORAGE_KEY);\n  if (!raw) return [];\n  const parsed = safeParse(raw);\n  if (!Array.isArray(parsed)) return [];\n  // Light validation: only keep objects with id + name\n  return parsed.filter((x) => x && typeof x === \"object\" && typeof (x as any).id === \"string\" && typeof (x as any).name === \"string\") as LenderRule[];\n}\n\nexport function saveCustomLenders(lenders: LenderRule[]) {\n  if (typeof window === \"undefined\") return;\n  window.localStorage.setItem(STORAGE_KEY, JSON.stringify(lenders));\n}\n\nexport function getAllLenders(): LenderRule[] {\n  // Built-ins first (stable ordering), with optional custom overrides by the same id.\n  // Any remaining custom lenders (ids not in built-ins) are appended.\n  const customs = loadCustomLenders();\n  const byId = new Map(customs.map((l) => [l.id, l] as const));\n  const builtIds = new Set(builtInLenders.map((l) => l.id));\n\n  const mergedBuiltIns = builtInLenders.map((l) => byId.get(l.id) ?? l);\n  const extraCustoms = customs.filter((l) => !builtIds.has(l.id));\n  return [...mergedBuiltIns, ...extraCustoms];\n}\n\nexport function useLenders() {\n  const [customs, setCustoms] = React.useState<LenderRule[]>([]);\n  React.useEffect(() => {\n    setCustoms(loadCustomLenders());\n  }, []);\n\n  const all = React.useMemo(() => {\n    const byId = new Map(customs.map((l) => [l.id, l] as const));\n    const builtIds = new Set(builtInLenders.map((l) => l.id));\n    const mergedBuiltIns = builtInLenders.map((l) => byId.get(l.id) ?? l);\n    const extraCustoms = customs.filter((l) => !builtIds.has(l.id));\n    return [...mergedBuiltIns, ...extraCustoms];\n  }, [customs]);\n\n  const setAllCustoms = React.useCallback((next: LenderRule[] | ((prev: LenderRule[]) => LenderRule[])) => {\n    setCustoms((prev) => {\n      const resolved = typeof next === \"function\" ? (next as any)(prev) : next;\n      saveCustomLenders(resolved);\n      return resolved;\n    });\n  }, []);\n\n  return { lenders: all, customLenders: customs, setCustomLenders: setAllCustoms };\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AAHA;;;AAKA,MAAM,cAAc;AAEpB,SAAS,UAAU,OAAe;IAChC,IAAI;QAAE,OAAO,KAAK,KAAK,CAAC;IAAU,EAAE,OAAM;QAAE,OAAO;IAAM;AAC3D;AAEO,SAAS;IACd,wCAAmC,OAAO,EAAE;;;IAC5C,MAAM;IAEN,MAAM;AAIR;AAEO,SAAS,kBAAkB,OAAqB;IACrD,wCAAmC;;;AAErC;AAEO,SAAS;IACd,oFAAoF;IACpF,oEAAoE;IACpE,MAAM,UAAU;IAChB,MAAM,OAAO,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAM;YAAC,EAAE,EAAE;YAAE;SAAE;IACjD,MAAM,WAAW,IAAI,IAAI,0HAAc,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;IAEvD,MAAM,iBAAiB,0HAAc,CAAC,GAAG,CAAC,CAAC,IAAM,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK;IACnE,MAAM,eAAe,QAAQ,MAAM,CAAC,CAAC,IAAM,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE;IAC7D,OAAO;WAAI;WAAmB;KAAa;AAC7C;AAEO,SAAS;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,iNAAc,CAAe,EAAE;IAC7D,kNAAe,CAAC;QACd,WAAW;IACb,GAAG,EAAE;IAEL,MAAM,MAAM,gNAAa,CAAC;QACxB,MAAM,OAAO,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAM;gBAAC,EAAE,EAAE;gBAAE;aAAE;QACjD,MAAM,WAAW,IAAI,IAAI,0HAAc,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;QACvD,MAAM,iBAAiB,0HAAc,CAAC,GAAG,CAAC,CAAC,IAAM,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK;QACnE,MAAM,eAAe,QAAQ,MAAM,CAAC,CAAC,IAAM,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE;QAC7D,OAAO;eAAI;eAAmB;SAAa;IAC7C,GAAG;QAAC;KAAQ;IAEZ,MAAM,gBAAgB,oNAAiB,CAAC,CAAC;QACvC,WAAW,CAAC;YACV,MAAM,WAAW,OAAO,SAAS,aAAa,AAAC,KAAa,QAAQ;YACpE,kBAAkB;YAClB,OAAO;QACT;IACF,GAAG,EAAE;IAEL,OAAO;QAAE,SAAS;QAAK,eAAe;QAAS,kBAAkB;IAAc;AACjF"}},
    {"offset": {"line": 924, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/app/%28app%29/results/page.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport Link from \"next/link\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { getScenario } from \"@/core/scenarioStore\";\nimport { evaluateScenario } from \"@/core/engine\";\nimport { useLenders } from \"@/lib/lendersStore\";\n\nfunction fmtDelta(n: number, digits = 3) {\n  const v = Math.round(n * 1000) / 1000;\n  const sign = v > 0 ? \"+\" : v < 0 ? \"−\" : \"\";\n  const abs = Math.abs(v).toFixed(digits);\n  return `${sign}${abs}`;\n}\n\nexport default function ResultsPage() {\n  const { lenders } = useLenders();\n  const scenario = getScenario();\n\n  const eligibleLenders = React.useMemo(() => {\n    if (scenario.useAllLenders || scenario.selectedLenderIds.length === 0) return lenders;\n    const set = new Set(scenario.selectedLenderIds);\n    return lenders.filter((l) => set.has(l.id));\n  }, [scenario.useAllLenders, scenario.selectedLenderIds]);\n\n  const results = React.useMemo(() => evaluateScenario(scenario, eligibleLenders), [scenario, eligibleLenders]);\n\n  const [expanded, setExpanded] = React.useState<string | null>(null);\n\n  const eligible = results.filter((r) => r.eligible);\n  const ineligible = results.filter((r) => !r.eligible);\n\n  return (\n    <div className=\"p-6 max-w-5xl mx-auto\">\n      <div className=\"flex items-start justify-between gap-4\">\n        <div>\n          <div className=\"text-xs text-muted-foreground\">LoanCursor</div>\n          <h1 className=\"mt-2 text-2xl font-semibold tracking-tight\">Pricing Results</h1>\n          <p className=\"mt-2 text-muted-foreground\">\n            Ranked lender view for the current scenario. Expand a row to see how pricing was built.\n          </p>\n        </div>\n        <div className=\"flex gap-3\">\n          <Link href=\"/scenario\">\n            <Button className=\"rounded-lg\">Edit Scenario</Button>\n          </Link>\n        </div>\n      </div>\n\n      <div className=\"mt-6 grid gap-4\">\n        <Card className=\"rounded-2xl border border-border bg-card/40 p-6\">\n          <div className=\"flex flex-wrap items-center gap-3\">\n            <div className=\"text-sm font-semibold text-foreground\">Eligible</div>\n            <div className=\"text-xs text-muted-foreground\">{eligible.length} lender(s)</div>\n          </div>\n\n          <div className=\"mt-4 overflow-x-auto\">\n            <table className=\"w-full text-sm\">\n              <thead className=\"text-muted-foreground\">\n                <tr className=\"text-left\">\n                  <th className=\"py-2 pr-4\">Lender</th>\n                  <th className=\"py-2 pr-4\">Rate</th>\n                  <th className=\"py-2 pr-4\">Points</th>\n                  <th className=\"py-2 pr-4\">Notes</th>\n                  <th className=\"py-2 pr-0 text-right\">Details</th>\n                </tr>\n              </thead>\n              <tbody>\n                {eligible.map((r) => {\n                  const isOpen = expanded === r.lenderId;\n                  return (\n                    <React.Fragment key={r.lenderId}>\n                      <tr className=\"border-t border-border/70\">\n                        <td className=\"py-3 pr-4 font-medium\">\n                          <Link className=\"hover:underline\" href={`/lenders/${r.lenderId}`}>\n                            {r.lenderName}\n                          </Link>\n                        </td>\n                        <td className=\"py-3 pr-4\">{r.rate.toFixed(3)}%</td>\n                        <td className=\"py-3 pr-4\">{r.points.toFixed(2)}</td>\n                        <td className=\"py-3 pr-4 text-muted-foreground\">{r.notes.join(\" • \") || \"—\"}</td>\n                        <td className=\"py-3 pr-0 text-right\">\n                          <button\n                            className=\"text-xs text-indigo-300 hover:underline\"\n                            onClick={() => setExpanded(isOpen ? null : r.lenderId)}\n                          >\n                            {isOpen ? \"Hide\" : \"Show\"}\n                          </button>\n                        </td>\n                      </tr>\n\n                      {isOpen && (\n                        <tr className=\"border-t border-border/70\">\n                          <td colSpan={5} className=\"py-4\">\n                            <div className=\"rounded-xl border border-border bg-muted/30 p-4\">\n                              <div className=\"text-xs text-muted-foreground\">Pricing build</div>\n\n                              <div className=\"mt-3 grid gap-2 text-sm\">\n                                <div className=\"flex items-center justify-between\">\n                                  <div className=\"text-foreground\">Base</div>\n                                  <div className=\"text-foreground\">\n                                    {r.baseRate.toFixed(3)}% • {r.basePoints.toFixed(2)} pts\n                                  </div>\n                                </div>\n\n                                {r.breakdown.map((b, idx) => (\n                                  <div key={idx} className=\"flex items-start justify-between gap-4\">\n                                    <div className=\"min-w-0\">\n                                      <div className=\"text-foreground\">{b.label}</div>\n                                      {b.note && <div className=\"text-xs text-muted-foreground\">{b.note}</div>}\n                                    </div>\n                                    <div className=\"shrink-0 text-right text-foreground tabular-nums\">\n                                      {fmtDelta(b.rateDelta)}% • {fmtDelta(b.pointsDelta, 2)} pts\n                                    </div>\n                                  </div>\n                                ))}\n\n                                <div className=\"mt-2 h-px bg-muted/40/70\" />\n\n                                <div className=\"flex items-center justify-between\">\n                                  <div className=\"text-foreground font-medium\">Final</div>\n                                  <div className=\"text-foreground font-medium\">\n                                    {r.rate.toFixed(3)}% • {r.points.toFixed(2)} pts\n                                  </div>\n                                </div>\n                              </div>\n\n                              <div className=\"mt-4 flex flex-wrap gap-3\">\n                                <Link href={`/lenders/${r.lenderId}`}>\n                                  <Button variant=\"secondary\" className=\"rounded-md\">\n                                    View lender profile\n                                  </Button>\n                                </Link>\n                              </div>\n                            </div>\n                          </td>\n                        </tr>\n                      )}\n                    </React.Fragment>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n\n          {eligible.length === 0 && (\n            <div className=\"mt-4 text-sm text-muted-foreground\">No eligible lenders for this scenario.</div>\n          )}\n        </Card>\n\n        <Card className=\"rounded-2xl border border-border bg-card/40 p-6\">\n          <div className=\"flex flex-wrap items-center gap-3\">\n            <div className=\"text-sm font-semibold text-foreground\">Ineligible</div>\n            <div className=\"text-xs text-muted-foreground\">{ineligible.length} lender(s)</div>\n          </div>\n\n          <div className=\"mt-4 overflow-x-auto\">\n            <table className=\"w-full text-sm\">\n              <thead className=\"text-muted-foreground\">\n                <tr className=\"text-left\">\n                  <th className=\"py-2 pr-4\">Lender</th>\n                  <th className=\"py-2 pr-4\">Why not</th>\n                  <th className=\"py-2 pr-0 text-right\">Profile</th>\n                </tr>\n              </thead>\n              <tbody>\n                {ineligible.map((r) => (\n                  <tr key={r.lenderId} className=\"border-t border-border/70\">\n                    <td className=\"py-3 pr-4 font-medium\">{r.lenderName}</td>\n                    <td className=\"py-3 pr-4 text-muted-foreground\">{r.notes.join(\" • \") || \"—\"}</td>\n                    <td className=\"py-3 pr-0 text-right\">\n                      <Link className=\"text-xs text-indigo-300 hover:underline\" href={`/lenders/${r.lenderId}`}>\n                        View\n                      </Link>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"mt-4 text-xs text-muted-foreground\">\n            Maintenance model: you update lender rules once; every future scenario uses the new truth.\n          </div>\n        </Card>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}