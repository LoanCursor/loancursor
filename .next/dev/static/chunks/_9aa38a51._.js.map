{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/cn\";\n\nexport function Card({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"rounded-md border border-border bg-card text-card-foreground shadow-sm\", className)} {...props} />;\n}\n\nexport function CardHeader({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"p-6 pb-2\", className)} {...props} />;\n}\n\nexport function CardTitle({ className, ...props }: React.HTMLAttributes<HTMLHeadingElement>) {\n  return <h3 className={cn(\"text-lg font-semibold tracking-tight\", className)} {...props} />;\n}\n\nexport function CardContent({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"p-6 pt-4\", className)} {...props} />;\n}\n"],"names":[],"mappings":";;;;;;;;;;;AACA;;;AAEO,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAA6C;IAChF,qBAAO,6LAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,0EAA0E;QAAa,GAAG,KAAK;;;;;;AAC3H;KAFgB;AAIT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAA6C;IACtF,qBAAO,6LAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAC7D;MAFgB;AAIT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAiD;IACzF,qBAAO,6LAAC;QAAG,WAAW,IAAA,kHAAE,EAAC,wCAAwC;QAAa,GAAG,KAAK;;;;;;AACxF;MAFgB;AAIT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAA6C;IACvF,qBAAO,6LAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAC7D;MAFgB"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/cn\";\n\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(({ className, ...props }, ref) => {\n  return (\n    <input\n      ref={ref}\n      className={cn(\n        \"h-10 w-full rounded-md border border-input bg-background px-3 text-sm shadow-sm transition placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background disabled:opacity-60\",\n        className\n      )}\n      {...props}\n    />\n  );\n});\nInput.displayName = \"Input\";\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIO,MAAM,sBAAQ,2KAAgB,MAA+B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC5F,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qPACA;QAED,GAAG,KAAK;;;;;;AAGf;;AACA,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/textarea.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/cn\";\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        ref={ref}\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-sm border border-input bg-background px-3 py-2 text-sm text-foreground shadow-sm transition placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        {...props}\n      />\n    );\n  }\n);\n\nTextarea.displayName = \"Textarea\";\n\nexport { Textarea };"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAQA,MAAM,yBAAW,2KAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,mTACA;QAED,GAAG,KAAK;;;;;;AAGf;;AAGF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/core/lenders.ts"],"sourcesContent":["import type { LoanType, Purpose, PropertyType, Scenario } from \"./scenarioTypes\";\n\nexport type LenderRule = {\n  id: string;\n  name: string;\n  tagline: string;\n\n  /** Which loan types this lender supports (e.g. DSCR) */\n  loanTypes: LoanType[];\n\n  /** Which purposes this lender supports (Purchase / Refi / CashOutRefi) */\n  purposes: Purpose[];\n\n  // --- Hard constraints (baseline / generic) ---\n  minFico: number;\n\n  /** Default max LTV if a more specific rule isn't provided */\n  maxLtv: number;\n\n  /** Optional: max LTV by purpose */\n  maxLtvByPurpose?: Partial<Record<Purpose, number>>;\n\n  /** Optional: cash-out max LTV tiers by FICO (evaluated highest minFico first) */\n  cashOutMaxLtvByFico?: { minFico: number; maxLtv: number; note?: string }[];\n\n  excludedStates?: string[];\n\n  allowedPropertyTypes?: PropertyType[];\n  disallowInterestOnly?: boolean;\n\n  /** Condo overlay (only used when propertyType === Condo) */\n  condoNonWarrantableMaxLtv?: number;\n\n  /** V1.5 market overlay */\n  decliningMarketLtvHit?: number; // subtract from max eligible LTV if scenario.decliningMarket === true\n\n  // --- DSCR constraints ---\n  /** Baseline DSCR minimum (if no tiers apply) */\n  minDscr?: number;\n\n  /** Optional: DSCR tiers by LTV (useful for \"Expanded\" style programs) */\n  dscrTiers?: { maxLtv: number; minDscr: number; note?: string }[];\n\n  /** Optional: STR overlay */\n  strMinDscr?: number;\n\n  // --- Base pricing (simple, realistic placeholders for V1.5) ---\n  baseRate: number;   // percent, e.g. 7.875\n  basePoints: number; // points, e.g. 1.25\n\n  // --- Pricing adjustments (rateAdd in percent; pointsAdd in points) ---\n  adjustments: {\n    ltv: { max: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    fico: { min: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    dscr?: { min: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    state?: { states: string[]; rateAdd: number; pointsAdd: number; note?: string }[];\n    io?: { when: \"Yes\" | \"No\"; rateAdd: number; pointsAdd: number; note?: string }[];\n    ppp?: { term: number; rateAdd: number; pointsAdd: number; note?: string }[];\n  };\n\n  strengths: string[];\n  avoidWhen: string[];\n};\n\n/**\n * Built-in reference lenders for V1.5.\n *\n * IMPORTANT:\n * - These are NOT \"live pricing\". They are reference configurations to validate the engine.\n * - Next step (forward vision): move these configs into Supabase and version them by effective date.\n */\nexport const lenders: LenderRule[] = [\n  {\n    id: \"bpl_standard\",\n    name: \"BPL – Standard\",\n    tagline: \"Conservative DSCR lane with simple overlays.\",\n    loanTypes: [\"DSCR\"],\n    purposes: [\"Purchase\", \"Refi\", \"CashOutRefi\"],\n\n    minFico: 680,\n\n    // Default caps\n    maxLtv: 80,\n    maxLtvByPurpose: {\n      Purchase: 80,\n      Refi: 80,\n      CashOutRefi: 75,\n    },\n    // Cash-out tiers by FICO (mirrors common sheet behavior)\n    cashOutMaxLtvByFico: [\n      { minFico: 700, maxLtv: 75, note: \"Cash-out tier (700+)\" },\n      { minFico: 680, maxLtv: 70, note: \"Cash-out tier (<700)\" },\n    ],\n\n    excludedStates: [],\n    allowedPropertyTypes: [\"SFR\", \"Condo\", \"2-4Unit\"],\n    disallowInterestOnly: false,\n\n    condoNonWarrantableMaxLtv: 70, // Standard is typically tighter on condos (placeholder)\n    decliningMarketLtvHit: 5,\n\n    // DSCR requirement: based on FICO (simplified from sheet language)\n    minDscr: 1.2, // for <720\n    // We'll enforce 1.0 for 720+ inside the engine notes/logic.\n\n    baseRate: 8.250,\n    basePoints: 1.25,\n\n    adjustments: {\n      ltv: [\n        { max: 65, rateAdd: -0.125, pointsAdd: -0.25, note: \"Low LTV credit\" },\n        { max: 70, rateAdd: 0.0, pointsAdd: 0.0 },\n        { max: 75, rateAdd: 0.125, pointsAdd: 0.25 },\n        { max: 80, rateAdd: 0.250, pointsAdd: 0.50, note: \"High LTV add\" },\n      ],\n      fico: [\n        { min: 760, rateAdd: -0.125, pointsAdd: -0.25 },\n        { min: 720, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 700, rateAdd: 0.125, pointsAdd: 0.25 },\n        { min: 680, rateAdd: 0.250, pointsAdd: 0.50 },\n      ],\n      dscr: [\n        { min: 1.35, rateAdd: -0.100, pointsAdd: -0.10 },\n        { min: 1.20, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 1.00, rateAdd: 0.100, pointsAdd: 0.10 },\n      ],\n      state: [],\n      io: [\n        { when: \"Yes\", rateAdd: 0.125, pointsAdd: 0.25, note: \"Interest-only add\" },\n        { when: \"No\", rateAdd: 0.0, pointsAdd: 0.0 },\n      ],\n      // PPP: base assumes 5-year; 3-year adds rate (from sheet language). Keep others neutral for now.\n      ppp: [\n        { term: 5, rateAdd: 0.0, pointsAdd: 0.0, note: \"Base assumes 5-yr PPP\" },\n        { term: 3, rateAdd: 0.375, pointsAdd: 0.0, note: \"3-yr PPP add\" },\n      ],\n    },\n\n    strengths: [\"Straightforward DSCR lane\", \"Predictable overlays\", \"Good for clean deals\"],\n    avoidWhen: [\"Borderline DSCR with high LTV\", \"Tight condos / special property types\"],\n  },\n\n  {\n    id: \"bpl_expanded\",\n    name: \"BPL – Expanded\",\n    tagline: \"More flexible DSCR with tiered DSCR and overlays.\",\n    loanTypes: [\"DSCR\"],\n    purposes: [\"Purchase\", \"Refi\", \"CashOutRefi\"],\n\n    minFico: 660,\n\n    maxLtv: 80,\n    maxLtvByPurpose: {\n      Purchase: 80,\n      Refi: 80,\n      CashOutRefi: 75,\n    },\n\n    excludedStates: [\"ND\", \"NV\", \"SD\"],\n    allowedPropertyTypes: [\"SFR\", \"Condo\", \"2-4Unit\"],\n    disallowInterestOnly: false,\n\n    condoNonWarrantableMaxLtv: 65,\n    decliningMarketLtvHit: 5,\n\n    // DSCR tiers by LTV (Expanded-style behavior)\n    dscrTiers: [\n      { maxLtv: 65, minDscr: 0.75, note: \"≤65 LTV DSCR tier\" },\n      { maxLtv: 80, minDscr: 1.0, note: \"65.01–80 LTV DSCR tier\" },\n    ],\n    strMinDscr: 1.15,\n\n    baseRate: 7.875,\n    basePoints: 1.75,\n\n    adjustments: {\n      ltv: [\n        { max: 65, rateAdd: -0.125, pointsAdd: -0.25, note: \"Low LTV credit\" },\n        { max: 70, rateAdd: 0.0, pointsAdd: 0.0 },\n        { max: 75, rateAdd: 0.125, pointsAdd: 0.25 },\n        { max: 80, rateAdd: 0.250, pointsAdd: 0.50, note: \"High LTV add\" },\n      ],\n      fico: [\n        { min: 760, rateAdd: -0.125, pointsAdd: -0.25 },\n        { min: 720, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 700, rateAdd: 0.125, pointsAdd: 0.25 },\n        { min: 660, rateAdd: 0.250, pointsAdd: 0.50 },\n      ],\n      dscr: [\n        { min: 1.35, rateAdd: -0.100, pointsAdd: -0.10 },\n        { min: 1.15, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 1.00, rateAdd: 0.100, pointsAdd: 0.10 },\n        { min: 0.75, rateAdd: 0.200, pointsAdd: 0.20, note: \"Low DSCR add\" },\n      ],\n      state: [\n        { states: [\"NY\", \"NJ\"], rateAdd: 0.05, pointsAdd: 0.05, note: \"State add (example)\" },\n      ],\n      io: [\n        { when: \"Yes\", rateAdd: 0.125, pointsAdd: 0.25, note: \"Interest-only add\" },\n        { when: \"No\", rateAdd: 0.0, pointsAdd: 0.0 },\n      ],\n      ppp: [\n        { term: 5, rateAdd: 0.0, pointsAdd: 0.0, note: \"Base assumes 5-yr PPP\" },\n        { term: 3, rateAdd: 0.250, pointsAdd: 0.0, note: \"3-yr PPP add\" },\n        { term: 2, rateAdd: 0.375, pointsAdd: 0.0, note: \"2-yr PPP add\" },\n        { term: 1, rateAdd: 0.500, pointsAdd: 0.0, note: \"1-yr PPP add\" },\n      ],\n    },\n\n    strengths: [\"Tiered DSCR options\", \"STR capable (with higher DSCR)\", \"More flexible overlays\"],\n    avoidWhen: [\"Excluded states (ND/NV/SD)\", \"Non-warrantable condos over 65 LTV\"],\n  },\n];\n\n/** Helper used in the engine: compute max eligible LTV for a lender given a scenario. */\nexport function maxEligibleLtvForScenario(l: LenderRule, s: Scenario): { maxLtv: number; notes: string[] } {\n  const notes: string[] = [];\n\n  let maxLtv = l.maxLtvByPurpose?.[s.purpose] ?? l.maxLtv;\n\n  // Cash-out tiers by FICO (if provided)\n  if (s.purpose === \"CashOutRefi\" && l.cashOutMaxLtvByFico?.length) {\n    const rows = [...l.cashOutMaxLtvByFico].sort((a, b) => b.minFico - a.minFico);\n    const row = rows.find((r) => s.fico >= r.minFico) ?? rows[rows.length - 1];\n    maxLtv = Math.min(maxLtv, row.maxLtv);\n    if (row.note) notes.push(row.note);\n  }\n\n  // Condo overlay: non-warrantable cap\n  if (s.propertyType === \"Condo\" && !s.condoWarrantable && typeof l.condoNonWarrantableMaxLtv === \"number\") {\n    maxLtv = Math.min(maxLtv, l.condoNonWarrantableMaxLtv);\n    notes.push(`Non-warrantable condo max LTV ${l.condoNonWarrantableMaxLtv}%`);\n  }\n\n  // Declining market overlay: reduce LTV cap\n  if (s.decliningMarket && typeof l.decliningMarketLtvHit === \"number\" && l.decliningMarketLtvHit > 0) {\n    maxLtv = Math.max(0, maxLtv - l.decliningMarketLtvHit);\n    notes.push(`Declining market: −${l.decliningMarketLtvHit}% max LTV`);\n  }\n\n  return { maxLtv, notes };\n}\n\n/** Helper used in the engine: compute DSCR minimum for a lender given a scenario. */\nexport function minDscrForScenario(l: LenderRule, s: Scenario): { minDscr: number; notes: string[] } {\n  const notes: string[] = [];\n\n  // STR overlay\n  if (s.isSTR && typeof l.strMinDscr === \"number\") {\n    notes.push(`STR min DSCR ${l.strMinDscr}`);\n    return { minDscr: l.strMinDscr, notes };\n  }\n\n  // Tiered DSCR by LTV\n  if (l.dscrTiers?.length) {\n    const row =\n      l.dscrTiers.find((t) => s.ltv <= t.maxLtv) ??\n      l.dscrTiers[l.dscrTiers.length - 1];\n\n    if (row.note) notes.push(row.note);\n    return { minDscr: row.minDscr, notes };\n  }\n\n  // BPL Standard special: 720+ lowers DSCR requirement (captured here without custom functions)\n  if (l.id === \"bpl_standard\") {\n    if (s.fico >= 720) return { minDscr: 1.0, notes: [\"FICO 720+ DSCR tier\"] };\n    return { minDscr: 1.2, notes: [\"FICO <720 DSCR tier\"] };\n  }\n\n  return { minDscr: l.minDscr ?? 0, notes };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 555, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/lib/lendersStore.ts"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { lenders as builtInLenders, type LenderRule } from \"@/core/lenders\";\n\nconst STORAGE_KEY = \"loancursor.customLenders.v2\";\n\nfunction safeParse(jsonStr: string): unknown {\n  try { return JSON.parse(jsonStr); } catch { return null; }\n}\n\nexport function loadCustomLenders(): LenderRule[] {\n  if (typeof window === \"undefined\") return [];\n  const raw = window.localStorage.getItem(STORAGE_KEY);\n  if (!raw) return [];\n  const parsed = safeParse(raw);\n  if (!Array.isArray(parsed)) return [];\n  // Light validation: only keep objects with id + name\n  return parsed.filter((x) => x && typeof x === \"object\" && typeof (x as any).id === \"string\" && typeof (x as any).name === \"string\") as LenderRule[];\n}\n\nexport function saveCustomLenders(lenders: LenderRule[]) {\n  if (typeof window === \"undefined\") return;\n  window.localStorage.setItem(STORAGE_KEY, JSON.stringify(lenders));\n}\n\nexport function getAllLenders(): LenderRule[] {\n  // Built-ins first (stable ordering), with optional custom overrides by the same id.\n  // Any remaining custom lenders (ids not in built-ins) are appended.\n  const customs = loadCustomLenders();\n  const byId = new Map(customs.map((l) => [l.id, l] as const));\n  const builtIds = new Set(builtInLenders.map((l) => l.id));\n\n  const mergedBuiltIns = builtInLenders.map((l) => byId.get(l.id) ?? l);\n  const extraCustoms = customs.filter((l) => !builtIds.has(l.id));\n  return [...mergedBuiltIns, ...extraCustoms];\n}\n\nexport function useLenders() {\n  const [customs, setCustoms] = React.useState<LenderRule[]>([]);\n  React.useEffect(() => {\n    setCustoms(loadCustomLenders());\n  }, []);\n\n  const all = React.useMemo(() => {\n    const byId = new Map(customs.map((l) => [l.id, l] as const));\n    const builtIds = new Set(builtInLenders.map((l) => l.id));\n    const mergedBuiltIns = builtInLenders.map((l) => byId.get(l.id) ?? l);\n    const extraCustoms = customs.filter((l) => !builtIds.has(l.id));\n    return [...mergedBuiltIns, ...extraCustoms];\n  }, [customs]);\n\n  const setAllCustoms = React.useCallback((next: LenderRule[] | ((prev: LenderRule[]) => LenderRule[])) => {\n    setCustoms((prev) => {\n      const resolved = typeof next === \"function\" ? (next as any)(prev) : next;\n      saveCustomLenders(resolved);\n      return resolved;\n    });\n  }, []);\n\n  return { lenders: all, customLenders: customs, setCustomLenders: setAllCustoms };\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;;AAHA;;;AAKA,MAAM,cAAc;AAEpB,SAAS,UAAU,OAAe;IAChC,IAAI;QAAE,OAAO,KAAK,KAAK,CAAC;IAAU,EAAE,OAAM;QAAE,OAAO;IAAM;AAC3D;AAEO,SAAS;IACd;;IACA,MAAM,MAAM,OAAO,YAAY,CAAC,OAAO,CAAC;IACxC,IAAI,CAAC,KAAK,OAAO,EAAE;IACnB,MAAM,SAAS,UAAU;IACzB,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS,OAAO,EAAE;IACrC,qDAAqD;IACrD,OAAO,OAAO,MAAM,CAAC,CAAC,IAAM,KAAK,OAAO,MAAM,YAAY,OAAO,AAAC,EAAU,EAAE,KAAK,YAAY,OAAO,AAAC,EAAU,IAAI,KAAK;AAC5H;AAEO,SAAS,kBAAkB,OAAqB;IACrD;;IACA,OAAO,YAAY,CAAC,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;AAC1D;AAEO,SAAS;IACd,oFAAoF;IACpF,oEAAoE;IACpE,MAAM,UAAU;IAChB,MAAM,OAAO,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAM;YAAC,EAAE,EAAE;YAAE;SAAE;IACjD,MAAM,WAAW,IAAI,IAAI,6HAAc,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;IAEvD,MAAM,iBAAiB,6HAAc,CAAC,GAAG,CAAC,CAAC,IAAM,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK;IACnE,MAAM,eAAe,QAAQ,MAAM,CAAC,CAAC,IAAM,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE;IAC7D,OAAO;WAAI;WAAmB;KAAa;AAC7C;AAEO,SAAS;;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,yKAAc,CAAe,EAAE;IAC7D,0KAAe;gCAAC;YACd,WAAW;QACb;+BAAG,EAAE;IAEL,MAAM,MAAM,wKAAa;mCAAC;YACxB,MAAM,OAAO,IAAI,IAAI,QAAQ,GAAG;2CAAC,CAAC,IAAM;wBAAC,EAAE,EAAE;wBAAE;qBAAE;;YACjD,MAAM,WAAW,IAAI,IAAI,6HAAc,CAAC,GAAG;2CAAC,CAAC,IAAM,EAAE,EAAE;;YACvD,MAAM,iBAAiB,6HAAc,CAAC,GAAG;0DAAC,CAAC,IAAM,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK;;YACnE,MAAM,eAAe,QAAQ,MAAM;wDAAC,CAAC,IAAM,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE;;YAC7D,OAAO;mBAAI;mBAAmB;aAAa;QAC7C;kCAAG;QAAC;KAAQ;IAEZ,MAAM,gBAAgB,4KAAiB;iDAAC,CAAC;YACvC;yDAAW,CAAC;oBACV,MAAM,WAAW,OAAO,SAAS,aAAa,AAAC,KAAa,QAAQ;oBACpE,kBAAkB;oBAClB,OAAO;gBACT;;QACF;gDAAG,EAAE;IAEL,OAAO;QAAE,SAAS;QAAK,eAAe;QAAS,kBAAkB;IAAc;AACjF;GAvBgB"}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/app/%28app%29/lenders/page.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport Link from \"next/link\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useLenders } from \"@/lib/lendersStore\";\nimport type { LenderRule } from \"@/core/lenders\";\n\nfunction slugifyId(name: string) {\n  return (\n    \"custom_\" +\n    name\n      .toLowerCase()\n      .trim()\n      .replace(/[^a-z0-9]+/g, \"_\")\n      .replace(/^_+|_+$/g, \"\")\n      .slice(0, 40)\n  );\n}\n\nconst ADJUSTMENTS_TEMPLATE = {\n  ltv: [{ max: 70, rateAdd: 0.0, pointsAdd: 0.0, note: \"Example LTV band\" }],\n  fico: [{ min: 720, rateAdd: 0.0, pointsAdd: 0.0, note: \"Example FICO tier\" }],\n  dscr: [{ min: 1.15, rateAdd: 0.0, pointsAdd: 0.0, note: \"Example DSCR tier\" }],\n  state: [{ states: [\"NY\"], rateAdd: 0.05, pointsAdd: 0.05, note: \"Example state add\" }],\n  io: [{ when: \"Yes\", rateAdd: 0.125, pointsAdd: 0.25, note: \"Example IO add\" }],\n  ppp: [{ term: 5, rateAdd: 0.0, pointsAdd: 0.0, note: \"Example PPP base\" }],\n};\n\nfunction buildBlank(): LenderRule {\n  return {\n    id: \"custom_new\",\n    name: \"\",\n    tagline: \"\",\n    loanTypes: [\"DSCR\"],\n    purposes: [\"Purchase\", \"Refi\", \"CashOutRefi\"],\n\n    minFico: 680,\n    maxLtv: 75,\n    minDscr: 1.0,\n    excludedStates: [],\n    allowedPropertyTypes: [\"SFR\", \"Condo\", \"2-4Unit\"],\n    disallowInterestOnly: false,\n    baseRate: 8.0,\n    basePoints: 1.0,\n    adjustments: ADJUSTMENTS_TEMPLATE as any,\n    strengths: [],\n    avoidWhen: [],\n  };\n}\n\nexport default function LendersPage() {\n  const { lenders, customLenders, setCustomLenders } = useLenders();\n\n  const customById = React.useMemo(() => new Set(customLenders.map((l) => l.id)), [customLenders]);\n\n  const [editing, setEditing] = React.useState<LenderRule | null>(null);\n  const [jsonErr, setJsonErr] = React.useState<string | null>(null);\n\n  function startAdd() {\n    setEditing(buildBlank());\n    setJsonErr(null);\n  }\n\n  function startEdit(id: string) {\n    const l = lenders.find((x) => x.id === id);\n    if (!l) return;\n    // Create editable clone (supports built-in override because id is preserved).\n    setEditing(JSON.parse(JSON.stringify(l)) as LenderRule);\n    setJsonErr(null);\n  }\n\n  function remove(id: string) {\n    // Removing an override reverts to the built-in lender (if one exists).\n    setCustomLenders((prev) => prev.filter((x) => x.id !== id));\n  }\n\n  function upsert(next: LenderRule) {\n    setCustomLenders((prev) => {\n      const idx = prev.findIndex((x) => x.id === next.id);\n      if (idx === -1) return [...prev, next];\n      const copy = [...prev];\n      copy[idx] = next;\n      return copy;\n    });\n  }\n\n  function save() {\n    if (!editing) return;\n\n    const trimmedName = editing.name.trim();\n    if (!trimmedName) {\n      setJsonErr(\"Name is required.\");\n      return;\n    }\n\n    const id = editing.id === \"custom_new\" ? slugifyId(trimmedName) : editing.id;\n\n    setJsonErr(null);\n    upsert({ ...editing, id });\n    setEditing(null);\n  }\n\n  function exportJson() {\n    const blob = new Blob([JSON.stringify(customLenders, null, 2)], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"loancursor-custom-lenders.json\";\n    a.click();\n    URL.revokeObjectURL(url);\n  }\n\n  async function importJson(file: File) {\n    const text = await file.text();\n    try {\n      const parsed = JSON.parse(text);\n      if (!Array.isArray(parsed)) throw new Error(\"JSON must be an array.\");\n      const cleaned = parsed\n        .filter((x: any) => x && typeof x.id === \"string\" && typeof x.name === \"string\")\n        .map((x: any) => x as LenderRule);\n      setCustomLenders(cleaned);\n    } catch (e: any) {\n      alert(e?.message || \"Invalid JSON\");\n    }\n  }\n\n  function toggleAllowedPropertyType(type: \"SFR\" | \"Condo\" | \"2-4Unit\", allowed: boolean) {\n    setEditing((prev) => {\n      if (!prev) return prev;\n      const current = new Set(prev.allowedPropertyTypes || []);\n      if (allowed) current.add(type);\n      else current.delete(type);\n      return { ...prev, allowedPropertyTypes: Array.from(current) as any };\n    });\n  }\n\n  const condoAllowed = !!editing?.allowedPropertyTypes?.includes(\"Condo\");\n\n  return (\n    <div className=\"p-6 max-w-5xl mx-auto\">\n      <div className=\"text-xs text-muted-foreground\">LoanCursor</div>\n\n      <div className=\"mt-2 flex items-start justify-between gap-4\">\n        <div>\n          <h1 className=\"text-2xl font-semibold tracking-tight\">Lenders</h1>\n          <p className=\"mt-2 text-muted-foreground\">\n            Built-in lenders can be <span className=\"text-foreground\">customized</span> (we store an override locally, so you\n            don’t change the code defaults). Custom lenders you add also appear in Scenario + Results.\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <Button onClick={startAdd}>Add lender</Button>\n          <Button variant=\"secondary\" onClick={exportJson}>\n            Export JSON\n          </Button>\n          <label className=\"inline-flex items-center gap-2 rounded-xl border border-border bg-card/40 px-3 py-2 text-sm cursor-pointer\">\n            Import JSON\n            <input\n              type=\"file\"\n              accept=\"application/json\"\n              className=\"hidden\"\n              onChange={(e) => {\n                const f = e.target.files?.[0];\n                if (f) importJson(f);\n                e.currentTarget.value = \"\";\n              }}\n            />\n          </label>\n        </div>\n      </div>\n\n      {editing && (\n        <Card className=\"mt-6 rounded-2xl border border-border bg-card/40 p-5\">\n          <div className=\"flex items-start justify-between gap-4\">\n            <div>\n              <div className=\"text-sm font-medium text-foreground\">\n                {editing.id === \"custom_new\" ? \"Add lender\" : \"Edit lender\"}\n              </div>\n              <div className=\"text-xs text-muted-foreground mt-1\">\n                Tip: start simple — base rate/points + a few adjustment tiers. You can refine later.\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <Button variant=\"secondary\" onClick={() => setEditing(null)}>\n                Cancel\n              </Button>\n              <Button onClick={save}>Save</Button>\n            </div>\n          </div>\n\n          {jsonErr && <div className=\"mt-3 text-sm text-rose-300\">{jsonErr}</div>}\n\n          <div className=\"mt-4 grid gap-3 md:grid-cols-2\">\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">Name</div>\n              <Input value={editing.name} onChange={(e) => setEditing({ ...editing, name: e.target.value })} />\n            </div>\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">Tagline</div>\n              <Input value={editing.tagline || \"\"} onChange={(e) => setEditing({ ...editing, tagline: e.target.value })} />\n            </div>\n\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">Min FICO</div>\n              <Input\n                type=\"number\"\n                value={String(editing.minFico ?? \"\")}\n                onChange={(e) => {\n                  const n = Number(e.target.value);\n                  setEditing({ ...editing, minFico: Number.isFinite(n) ? n : editing.minFico });\n                }}\n              />\n            </div>\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">Max LTV</div>\n              <Input\n                type=\"number\"\n                value={String(editing.maxLtv ?? \"\")}\n                onChange={(e) => {\n                  const n = Number(e.target.value);\n                  setEditing({ ...editing, maxLtv: Number.isFinite(n) ? n : editing.maxLtv });\n                }}\n              />\n            </div>\n\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">Min DSCR</div>\n              <Input\n                type=\"number\"\n                step=\"0.01\"\n                value={String(editing.minDscr ?? \"\")}\n                onChange={(e) => {\n                  const n = Number(e.target.value);\n                  setEditing({ ...editing, minDscr: Number.isFinite(n) ? n : editing.minDscr });\n                }}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-2\">\n              <div>\n                <div className=\"text-xs text-muted-foreground mb-1\">Base rate</div>\n                <Input\n                  type=\"number\"\n                  step=\"0.001\"\n                  value={String(editing.baseRate ?? \"\")}\n                  onChange={(e) => {\n                    const n = Number(e.target.value);\n                    setEditing({ ...editing, baseRate: Number.isFinite(n) ? n : editing.baseRate });\n                  }}\n                />\n              </div>\n              <div>\n                <div className=\"text-xs text-muted-foreground mb-1\">Base points</div>\n                <Input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={String(editing.basePoints ?? \"\")}\n                  onChange={(e) => {\n                    const n = Number(e.target.value);\n                    setEditing({ ...editing, basePoints: Number.isFinite(n) ? n : editing.basePoints });\n                  }}\n                />\n              </div>\n            </div>\n\n            <div>\n              <div className=\"text-xs text-muted-foreground mb-1\">Excluded states (comma separated)</div>\n              <Input\n                value={(editing.excludedStates || []).join(\",\")}\n                onChange={(e) =>\n                  setEditing({\n                    ...editing,\n                    excludedStates: e.target.value\n                      .split(\",\")\n                      .map((s) => s.trim().toUpperCase())\n                      .filter(Boolean),\n                  })\n                }\n              />\n            </div>\n\n            {/* ✅ FIXED: Condo disallow uses allowedPropertyTypes instead of a missing disallowCondo field */}\n            <div className=\"flex items-center gap-4 pt-5\">\n              <label className=\"inline-flex items-center gap-2 text-sm text-muted-foreground\">\n                <input\n                  type=\"checkbox\"\n                  checked={!condoAllowed}\n                  onChange={(e) => toggleAllowedPropertyType(\"Condo\", !e.target.checked)}\n                />\n                Disallow Condo\n              </label>\n\n              <label className=\"inline-flex items-center gap-2 text-sm text-muted-foreground\">\n                <input\n                  type=\"checkbox\"\n                  checked={!!editing.disallowInterestOnly}\n                  onChange={(e) => setEditing({ ...editing, disallowInterestOnly: e.target.checked })}\n                />\n                Disallow IO\n              </label>\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <div className=\"text-xs text-muted-foreground mb-1\">Strengths (one per line)</div>\n              <Textarea\n                rows={3}\n                value={(editing.strengths || []).join(\"\\n\")}\n                onChange={(e) =>\n                  setEditing({\n                    ...editing,\n                    strengths: e.target.value\n                      .split(\"\\n\")\n                      .map((s) => s.trim())\n                      .filter(Boolean),\n                  })\n                }\n              />\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <div className=\"text-xs text-muted-foreground mb-1\">Avoid when (one per line)</div>\n              <Textarea\n                rows={3}\n                value={(editing.avoidWhen || []).join(\"\\n\")}\n                onChange={(e) =>\n                  setEditing({\n                    ...editing,\n                    avoidWhen: e.target.value\n                      .split(\"\\n\")\n                      .map((s) => s.trim())\n                      .filter(Boolean),\n                  })\n                }\n              />\n            </div>\n\n            {/* ✅ NEW: Full lender JSON preview so you can confirm minFico changes */}\n            <div className=\"md:col-span-2\">\n              <div className=\"text-xs text-muted-foreground mb-1\">Lender JSON (preview)</div>\n              <Textarea rows={10} readOnly value={JSON.stringify(editing, null, 2)} />\n              <div className=\"mt-2 text-xs text-muted-foreground\">\n                This preview updates as you edit fields (so you can confirm changes like Min FICO are really saved).\n              </div>\n            </div>\n\n            {/* Adjustments editor remains separate (it only edits adjustments) */}\n            <div className=\"md:col-span-2\">\n              <div className=\"text-xs text-muted-foreground mb-1\">Adjustments (JSON)</div>\n              <Textarea\n                rows={10}\n                value={JSON.stringify(editing.adjustments || ADJUSTMENTS_TEMPLATE, null, 2)}\n                onChange={(e) => {\n                  try {\n                    const parsed = JSON.parse(e.target.value || \"{}\");\n                    setEditing({ ...editing, adjustments: parsed as any });\n                    setJsonErr(null);\n                  } catch {\n                    setJsonErr(\"Adjustments JSON is invalid (fix the JSON).\");\n                  }\n                }}\n              />\n              <div className=\"mt-2 text-xs text-muted-foreground\">\n                Adjustments drive pricing + breakdown. This editor only modifies the adjustments block (not Min FICO, Max LTV, etc.).\n              </div>\n            </div>\n          </div>\n        </Card>\n      )}\n\n      <div className=\"mt-6 grid gap-4\">\n        {lenders.map((l) => {\n          const isBuiltIn = !l.id.startsWith(\"custom_\");\n          const isOverridden = isBuiltIn && customById.has(l.id);\n\n          return (\n            <Card key={l.id} className=\"rounded-2xl border border-border bg-card/40 p-5\">\n              <div className=\"flex items-start justify-between gap-4\">\n                <div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"text-lg font-medium text-foreground\">{l.name}</div>\n                    {isBuiltIn ? (\n                      <span className=\"text-[11px] rounded-full border border-border bg-card/40 px-2 py-0.5 text-muted-foreground\">\n                        {isOverridden ? \"Built-in (overridden)\" : \"Built-in\"}\n                      </span>\n                    ) : (\n                      <span className=\"text-[11px] rounded-full border border-emerald-800 bg-emerald-900/30 px-2 py-0.5 text-emerald-200\">\n                        Custom\n                      </span>\n                    )}\n                  </div>\n\n                  {l.tagline && <div className=\"mt-1 text-sm text-muted-foreground\">{l.tagline}</div>}\n\n                  <div className=\"mt-2 text-xs text-muted-foreground\">\n                    Min FICO {l.minFico} • Max LTV {l.maxLtv}% • Min DSCR {l.minDscr} • Base {l.baseRate.toFixed(3)} /{\" \"}\n                    {l.basePoints.toFixed(2)} pts\n                  </div>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  <Link href={`/lenders/${l.id}`} className=\"text-sm text-foreground hover:underline\">\n                    View\n                  </Link>\n\n                  <Button variant=\"secondary\" onClick={() => startEdit(l.id)}>\n                    {isBuiltIn ? (isOverridden ? \"Edit override\" : \"Customize\") : \"Edit\"}\n                  </Button>\n\n                  {(l.id.startsWith(\"custom_\") || isOverridden) && (\n                    <Button\n                      variant=\"outline\"\n                      className=\"border-rose-800 text-rose-200 hover:bg-rose-900/20\"\n                      onClick={() => remove(l.id)}\n                    >\n                      {l.id.startsWith(\"custom_\") ? \"Delete\" : \"Reset\"}\n                    </Button>\n                  )}\n                </div>\n              </div>\n            </Card>\n          );\n        })}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}