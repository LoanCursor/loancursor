{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/cn\";\n\nexport function Card({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"rounded-md border border-border bg-card text-card-foreground shadow-sm\", className)} {...props} />;\n}\n\nexport function CardHeader({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"p-6 pb-2\", className)} {...props} />;\n}\n\nexport function CardTitle({ className, ...props }: React.HTMLAttributes<HTMLHeadingElement>) {\n  return <h3 className={cn(\"text-lg font-semibold tracking-tight\", className)} {...props} />;\n}\n\nexport function CardContent({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\n  return <div className={cn(\"p-6 pt-4\", className)} {...props} />;\n}\n"],"names":[],"mappings":";;;;;;;;;;;AACA;;;AAEO,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAA6C;IAChF,qBAAO,6LAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,0EAA0E;QAAa,GAAG,KAAK;;;;;;AAC3H;KAFgB;AAIT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAA6C;IACtF,qBAAO,6LAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAC7D;MAFgB;AAIT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAiD;IACzF,qBAAO,6LAAC;QAAG,WAAW,IAAA,kHAAE,EAAC,wCAAwC;QAAa,GAAG,KAAK;;;;;;AACxF;MAFgB;AAIT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAA6C;IACvF,qBAAO,6LAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAC7D;MAFgB"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/cn\";\n\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nexport const Input = React.forwardRef<HTMLInputElement, InputProps>(({ className, ...props }, ref) => {\n  return (\n    <input\n      ref={ref}\n      className={cn(\n        \"h-10 w-full rounded-md border border-input bg-background px-3 text-sm shadow-sm transition placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background disabled:opacity-60\",\n        className\n      )}\n      {...props}\n    />\n  );\n});\nInput.displayName = \"Input\";\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAIO,MAAM,sBAAQ,2KAAgB,MAA+B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC5F,qBACE,6LAAC;QACC,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,qPACA;QAED,GAAG,KAAK;;;;;;AAGf;;AACA,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/select.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\";\n\nimport { cn } from \"@/lib/cn\";\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-11 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm transition focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n));\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4 text-muted-foreground\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\"flex cursor-default items-center justify-center py-1\", className)}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      position={position}\n      className={cn(\n        \"relative z-50 max-h-72 min-w-[8rem] overflow-hidden rounded-md border border-border bg-background shadow-lg\",\n        \"origin-[var(--radix-select-content-transform-origin)] transition duration-150\",\n        \"data-[state=open]:opacity-100 data-[state=closed]:opacity-0\",\n        \"data-[state=open]:scale-100 data-[state=closed]:scale-95\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=top]:-translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1\",\n        className\n      )}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n));\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-xs font-medium text-muted-foreground\", className)}\n    {...props}\n  />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-md py-2 pl-8 pr-2 text-sm outline-none\",\n      \"focus:bg-muted focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,6KAAoB;AAEnC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,cAAc,8KAAqB;AAEzC,MAAM,8BAAgB,2KAAgB,MAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,gLAAuB;QACtB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,sRACA;QAED,GAAG,KAAK;;YAER;0BACD,6LAAC,6KAAoB;gBAAC,OAAO;0BAC3B,cAAA,6LAAC,sOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;;AAI7B,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,qCAAuB,2KAAgB,CAG3C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,uLAA8B;QAC7B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,6LAAC,gOAAS;YAAC,WAAU;;;;;;;;;;;MATnB;AAYN,qBAAqB,WAAW,GAAG,uLAA8B,CAAC,WAAW;AAE7E,MAAM,uCAAyB,2KAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,yLAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,wDAAwD;QACrE,GAAG,KAAK;kBAET,cAAA,6LAAC,sOAAW;YAAC,WAAU;;;;;;;;;;;MATrB;AAYN,uBAAuB,WAAW,GAAG,yLAAgC,CAAC,WAAW;AAEjF,MAAM,8BAAgB,2KAAgB,OAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACzD,6LAAC,+KAAsB;kBACrB,cAAA,6LAAC,gLAAuB;YACtB,KAAK;YACL,UAAU;YACV,WAAW,IAAA,kHAAE,EACX,+GACA,iFACA,+DACA,4DACA,aAAa,YACX,mIACF;YAED,GAAG,KAAK;;8BAET,6LAAC;;;;;8BACD,6LAAC,iLAAwB;oBACvB,WAAW,IAAA,kHAAE,EACX,OACA,aAAa,YACX;8BAGH;;;;;;8BAEH,6LAAC;;;;;;;;;;;;;;;;;AAIP,cAAc,WAAW,GAAG,gLAAuB,CAAC,WAAW;AAE/D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,yDAAyD;QACtE,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,2BAAa,2KAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,6LAAC,6KAAoB;QACnB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,+GACA,uGACA;QAED,GAAG,KAAK;;0BAET,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC,sLAA6B;8BAC5B,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAGrB,6LAAC,iLAAwB;0BAAE;;;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,6KAAoB,CAAC,WAAW;AAEzD,MAAM,gCAAkB,2KAAgB,QAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,kLAAyB;QACxB,KAAK;QACL,WAAW,IAAA,kHAAE,EAAC,6BAA6B;QAC1C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG,kLAAyB,CAAC,WAAW"}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/tabs.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\n\nimport { cn } from \"@/lib/cn\";\n\nconst Tabs = TabsPrimitive.Root;\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      // Dark bar; active tab uses indigo tint for contrast (no white).\n      \"inline-flex h-11 w-full items-center justify-start gap-1 rounded-md border border-border bg-muted/40 p-1 text-foreground\",\n      className\n    )}\n    {...props}\n  />\n));\nTabsList.displayName = TabsPrimitive.List.displayName;\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      // Less roundy, calmer active state using your preferred indigo palette.\n      \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-sm px-3 py-2 text-sm font-medium transition\",\n      \"text-muted-foreground hover:text-foreground\",\n      \"border border-transparent\",\n      \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\n      \"data-[state=active]:bg-primary/10 data-[state=active]:text-foreground data-[state=active]:border-border\",\n      className\n    )}\n    {...props}\n  />\n));\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-6 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-600/40\",\n      className\n    )}\n    {...props}\n  />\n));\nTabsContent.displayName = TabsPrimitive.Content.displayName;\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,OAAO,2KAAkB;AAE/B,MAAM,yBAAW,2KAAgB,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,2KAAkB;QACjB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,iEAAiE;QACjE,4HACA;QAED,GAAG,KAAK;;;;;;;AAGb,SAAS,WAAW,GAAG,2KAAkB,CAAC,WAAW;AAErD,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,wEAAwE;QACxE,uHACA,+CACA,6BACA,4IACA,2GACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW;AAE3D,MAAM,4BAAc,2KAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,8KAAqB;QACpB,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,yFACA;QAED,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,8KAAqB,CAAC,WAAW"}},
    {"offset": {"line": 396, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/ui/checkbox.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/cn\";\n\ntype CheckboxProps = Omit<React.InputHTMLAttributes<HTMLInputElement>, \"type\" | \"onChange\"> & {\n  /** shadcn/Radix-style API used throughout the app */\n  onCheckedChange?: (checked: boolean) => void;\n};\n\nexport function Checkbox({ className, onCheckedChange, checked, defaultChecked, ...props }: CheckboxProps) {\n  const isControlled = typeof checked === \"boolean\";\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onCheckedChange?.(e.target.checked);\n    // If caller passed an onChange too, still honor it via props (we stripped onChange from types, but it may exist at runtime)\n    // @ts-expect-error - allow passthrough if provided\n    props.onChange?.(e);\n  };\n\n  return (\n    <input\n      type=\"checkbox\"\n      className={cn(\n        \"h-5 w-5 rounded-md border border-input bg-background shadow-sm accent-primary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background\",\n        className\n      )}\n      checked={isControlled ? checked : undefined}\n      defaultChecked={!isControlled ? defaultChecked : undefined}\n      onChange={handleChange}\n      // Prevent React warning if someone sets `checked` but provides no handler (we provide onChange above, but keep this safe)\n      readOnly={isControlled && !onCheckedChange && !(props as any).onChange}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,SAAS,EAAE,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,OAAsB;IACvG,MAAM,eAAe,OAAO,YAAY;IACxC,MAAM,eAAe,CAAC;QACpB,kBAAkB,EAAE,MAAM,CAAC,OAAO;QAClC,4HAA4H;QAC5H,mDAAmD;QACnD,MAAM,QAAQ,GAAG;IACnB;IAEA,qBACE,6LAAC;QACC,MAAK;QACL,WAAW,IAAA,kHAAE,EACX,kLACA;QAEF,SAAS,eAAe,UAAU;QAClC,gBAAgB,CAAC,eAAe,iBAAiB;QACjD,UAAU;QACV,0HAA0H;QAC1H,UAAU,gBAAgB,CAAC,mBAAmB,CAAC,AAAC,MAAc,QAAQ;QACrE,GAAG,KAAK;;;;;;AAGf;KAxBgB"}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/CurrencyInput.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nfunction formatUSD(value: number) {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    maximumFractionDigits: 0,\n  }).format(value);\n}\n\nfunction parseNumber(input: string) {\n  // keep digits and decimal only\n  const cleaned = input.replace(/[^\\d.]/g, \"\");\n  const num = Number(cleaned);\n  return Number.isFinite(num) ? num : 0;\n}\n\nexport function CurrencyInput({\n  label,\n  value,\n  onChange,\n  placeholder,\n  className,\n}: {\n  /** Optional label. If you wrap this input with <Field label=\"...\">, omit this. */\n  label?: string;\n  value: number;\n  onChange: (v: number) => void;\n  placeholder?: string;\n  className?: string;\n}) {\n  const [text, setText] = React.useState<string>(value ? formatUSD(value) : \"\");\n  const [focused, setFocused] = React.useState(false);\n\n  React.useEffect(() => {\n    if (!focused) setText(value ? formatUSD(value) : \"\");\n  }, [value, focused]);\n\n  return (\n    <div className=\"space-y-2\">\n      {label ? <label className=\"text-sm font-medium\">{label}</label> : null}\n      <input\n        className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground shadow-sm transition placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background disabled:cursor-not-allowed disabled:opacity-60 ${className ?? \"\"}`}\n        inputMode=\"numeric\"\n        placeholder={placeholder}\n        value={text}\n        onFocus={() => {\n          setFocused(true);\n          setText(value ? String(value) : \"\");\n        }}\n        onBlur={() => {\n          setFocused(false);\n          const num = parseNumber(text);\n          // Parent already received live updates; on blur we only normalize formatting.\n          setText(num ? formatUSD(num) : \"\");\n        }}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            e.currentTarget.blur();\n          }\n        }}\n        onChange={(e) => {\n          const next = e.target.value;\n          setText(next);\n          // Update parent while typing so values don't feel 'stuck'\n          const num = parseNumber(next);\n          onChange(num);\n        }}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIA,SAAS,UAAU,KAAa;IAC9B,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;QACV,uBAAuB;IACzB,GAAG,MAAM,CAAC;AACZ;AAEA,SAAS,YAAY,KAAa;IAChC,+BAA+B;IAC/B,MAAM,UAAU,MAAM,OAAO,CAAC,WAAW;IACzC,MAAM,MAAM,OAAO;IACnB,OAAO,OAAO,QAAQ,CAAC,OAAO,MAAM;AACtC;AAEO,SAAS,cAAc,EAC5B,KAAK,EACL,KAAK,EACL,QAAQ,EACR,WAAW,EACX,SAAS,EAQV;;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,yKAAc,CAAS,QAAQ,UAAU,SAAS;IAC1E,MAAM,CAAC,SAAS,WAAW,GAAG,yKAAc,CAAC;IAE7C,0KAAe;mCAAC;YACd,IAAI,CAAC,SAAS,QAAQ,QAAQ,UAAU,SAAS;QACnD;kCAAG;QAAC;QAAO;KAAQ;IAEnB,qBACE,6LAAC;QAAI,WAAU;;YACZ,sBAAQ,6LAAC;gBAAM,WAAU;0BAAuB;;;;;uBAAiB;0BAClE,6LAAC;gBACC,WAAW,CAAC,wSAAwS,EAAE,aAAa,IAAI;gBACvU,WAAU;gBACV,aAAa;gBACb,OAAO;gBACP,SAAS;oBACP,WAAW;oBACX,QAAQ,QAAQ,OAAO,SAAS;gBAClC;gBACA,QAAQ;oBACN,WAAW;oBACX,MAAM,MAAM,YAAY;oBACxB,8EAA8E;oBAC9E,QAAQ,MAAM,UAAU,OAAO;gBACjC;gBACA,WAAW,CAAC;oBACV,IAAI,EAAE,GAAG,KAAK,SAAS;wBACrB,EAAE,aAAa,CAAC,IAAI;oBACtB;gBACF;gBACA,UAAU,CAAC;oBACT,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK;oBAC3B,QAAQ;oBACR,0DAA0D;oBAC1D,MAAM,MAAM,YAAY;oBACxB,SAAS;gBACX;;;;;;;;;;;;AAIR;GAtDgB;KAAA"}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/components/PercentInput.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nfunction parseNumber(input: string) {\n  const cleaned = input.replace(/[^\\d.]/g, \"\");\n  const num = Number(cleaned);\n  return Number.isFinite(num) ? num : 0;\n}\n\nexport function PercentInput({\n  value,\n  onChange,\n  placeholder,\n  className,\n  min,\n  max,\n}: {\n  value: number;\n  onChange: (v: number) => void;\n  placeholder?: string;\n  className?: string;\n  min?: number;\n  max?: number;\n}) {\n  const [text, setText] = React.useState<string>(value ? String(value) : \"\");\n  const [focused, setFocused] = React.useState(false);\n\n  React.useEffect(() => {\n    if (!focused) setText(value ? String(value) : \"\");\n  }, [value, focused]);\n\n  return (\n    <div className=\"relative\">\n      <input\n        className={className}\n        inputMode=\"decimal\"\n        placeholder={placeholder}\n        value={text}\n        onFocus={() => setFocused(true)}\n        onBlur={() => {\n          setFocused(false);\n          let v = parseNumber(text);\n          if (typeof min === \"number\") v = Math.max(min, v);\n          if (typeof max === \"number\") v = Math.min(max, v);\n          // Ensure final clamped value is applied\n          onChange(v);\n          setText(v ? String(v) : \"\");\n        }}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            e.currentTarget.blur();\n          }\n        }}\n        onChange={(e) => {\n          const next = e.target.value;\n          setText(next);\n          // Update parent while typing\n          let v = parseNumber(next);\n          if (typeof min === \"number\") v = Math.max(min, v);\n          if (typeof max === \"number\") v = Math.min(max, v);\n          onChange(v);\n        }}\n      />\n      <div className=\"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground text-sm\">\n        %\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIA,SAAS,YAAY,KAAa;IAChC,MAAM,UAAU,MAAM,OAAO,CAAC,WAAW;IACzC,MAAM,MAAM,OAAO;IACnB,OAAO,OAAO,QAAQ,CAAC,OAAO,MAAM;AACtC;AAEO,SAAS,aAAa,EAC3B,KAAK,EACL,QAAQ,EACR,WAAW,EACX,SAAS,EACT,GAAG,EACH,GAAG,EAQJ;;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,yKAAc,CAAS,QAAQ,OAAO,SAAS;IACvE,MAAM,CAAC,SAAS,WAAW,GAAG,yKAAc,CAAC;IAE7C,0KAAe;kCAAC;YACd,IAAI,CAAC,SAAS,QAAQ,QAAQ,OAAO,SAAS;QAChD;iCAAG;QAAC;QAAO;KAAQ;IAEnB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,WAAW;gBACX,WAAU;gBACV,aAAa;gBACb,OAAO;gBACP,SAAS,IAAM,WAAW;gBAC1B,QAAQ;oBACN,WAAW;oBACX,IAAI,IAAI,YAAY;oBACpB,IAAI,OAAO,QAAQ,UAAU,IAAI,KAAK,GAAG,CAAC,KAAK;oBAC/C,IAAI,OAAO,QAAQ,UAAU,IAAI,KAAK,GAAG,CAAC,KAAK;oBAC/C,wCAAwC;oBACxC,SAAS;oBACT,QAAQ,IAAI,OAAO,KAAK;gBAC1B;gBACA,WAAW,CAAC;oBACV,IAAI,EAAE,GAAG,KAAK,SAAS;wBACrB,EAAE,aAAa,CAAC,IAAI;oBACtB;gBACF;gBACA,UAAU,CAAC;oBACT,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK;oBAC3B,QAAQ;oBACR,6BAA6B;oBAC7B,IAAI,IAAI,YAAY;oBACpB,IAAI,OAAO,QAAQ,UAAU,IAAI,KAAK,GAAG,CAAC,KAAK;oBAC/C,IAAI,OAAO,QAAQ,UAAU,IAAI,KAAK,GAAG,CAAC,KAAK;oBAC/C,SAAS;gBACX;;;;;;0BAEF,6LAAC;gBAAI,WAAU;0BAA8F;;;;;;;;;;;;AAKnH;GA3DgB;KAAA"}},
    {"offset": {"line": 623, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/core/scenarioStore.ts"],"sourcesContent":["import type { Scenario } from \"./scenarioTypes\";\n\nconst KEY = \"loancursor_last_scenario\";\n\nexport function defaultScenario(): Scenario {\n  return {\n    loanType: \"DSCR\",\n    purpose: \"Purchase\",\n    propertyValue: 600000,\n    loanAmount: 450000,\n    ltv: 75,\n    fico: 720,\n\n    rentMonthly: 4500,\n    propertyTaxAnnual: 7200,\n    hoaMonthly: 0,\n\n    qualifyingRate: 8.25,\n    dscr: 0,\n\n    state: \"FL\",\n    propertyType: \"SFR\",\n    occupancy: \"Investment\",\n    lienPosition: \"First\",\n    reservesMonths: 6,\n    unitCount: 2,\n\n    condoWarrantable: true,\n    isSTR: false,\n    decliningMarket: false,\n\n    interestOnly: false,\n    ioYears: 10,\n\n    amortizationYears: 30, // ✅ THIS was missing\n\n    prepayType: \"None\",\n    prepayTerm: 5,\n\n    entity: \"Entity\",\n\n    useAllLenders: true,\n    selectedLenderIds: [],\n  };\n}\n\nexport function validateScenario(\n  s: Scenario\n): { ok: true } | { ok: false; error: string } {\n  // --- State ---\n  if (!s.state || s.state.trim().length !== 2) {\n    return { ok: false, error: \"State must be a 2-letter code (e.g. FL).\" };\n  }\n\n  // --- Property & Loan ---\n  if (!s.occupancy) {\n    return { ok: false, error: \"Select an occupancy type.\" };\n  }\n  if (!s.lienPosition) {\n    return { ok: false, error: \"Select a lien position.\" };\n  }\n\n  if (s.propertyType === \"2-4Unit\") {\n    const u = Number(s.unitCount);\n    if (![2, 3, 4].includes(u)) {\n      return { ok: false, error: \"For 2–4 Unit properties, select the number of units (2, 3, or 4).\" };\n    }\n  }\n\n  if (!Number.isFinite(s.propertyValue) || s.propertyValue <= 0) {\n    return { ok: false, error: \"Property value must be greater than 0.\" };\n  }\n\n  if (!Number.isFinite(s.loanAmount) || s.loanAmount <= 0) {\n    return { ok: false, error: \"Loan amount must be greater than 0.\" };\n  }\n\n  if (s.loanAmount > s.propertyValue) {\n    return { ok: false, error: \"Loan amount cannot exceed property value.\" };\n  }\n\n  if (!Number.isFinite(s.ltv) || s.ltv <= 0 || s.ltv > 100) {\n    return { ok: false, error: \"LTV must be between 1 and 100.\" };\n  }\n\n  // --- Credit ---\n  if (!Number.isFinite(s.fico) || s.fico < 300 || s.fico > 850) {\n    return { ok: false, error: \"Credit score must be between 300 and 850.\" };\n  }\n\n  // --- Income / DSCR inputs ---\n  if (!Number.isFinite(s.rentMonthly) || s.rentMonthly <= 0) {\n    return { ok: false, error: \"Monthly rent must be greater than 0.\" };\n  }\n\n  if (!Number.isFinite(s.propertyTaxAnnual) || s.propertyTaxAnnual < 0) {\n    return { ok: false, error: \"Annual property tax must be 0 or greater.\" };\n  }\n\n  if (!Number.isFinite(s.hoaMonthly) || s.hoaMonthly < 0) {\n    return { ok: false, error: \"Monthly HOA must be 0 or greater.\" };\n  }\n\n  // --- Reserves (optional) ---\n  if (s.reservesMonths != null) {\n    const rm = Number(s.reservesMonths);\n    if (!Number.isFinite(rm) || rm < 0 || rm > 36) {\n      return { ok: false, error: \"Reserves months must be between 0 and 36.\" };\n    }\n  }\n\n  // --- Qualifying rate (for DSCR calc) ---\n  if (!Number.isFinite(s.qualifyingRate) || s.qualifyingRate <= 0 || s.qualifyingRate > 20) {\n    return { ok: false, error: \"Qualifying rate must be a valid percentage.\" };\n  }\n\n  // --- DSCR (computed, but still sanity-checked) ---\n  if (!Number.isFinite(s.dscr) || s.dscr <= 0) {\n    return { ok: false, error: \"DSCR could not be calculated. Check rent, expenses, and loan terms.\" };\n  }\n\n  \n// --- Interest-only structure ---\nif (s.interestOnly) {\n  const io = Number(s.ioYears);\n  if (![5, 7, 10].includes(io)) {\n    return { ok: false, error: \"Select an Interest-Only structure (5, 7, or 10 years IO).\" };\n  }\n}\n\n// --- PPP logic sanity ---\n  if (s.prepayType !== \"None\") {\n    if (!Number.isFinite(s.prepayTerm) || s.prepayTerm < 1 || s.prepayTerm > 7) {\n      return { ok: false, error: \"Prepayment penalty term must be between 1 and 7 years.\" };\n    }\n  } \n\n  return { ok: true };\n}\n\nexport function saveScenario(s: Scenario) {\n  try {\n    localStorage.setItem(KEY, JSON.stringify(s));\n  } catch {\n    // ignore\n  }\n}\n\nexport function getScenario(): Scenario {\n  try {\n    const raw = localStorage.getItem(KEY);\n    if (!raw) return defaultScenario();\n    const parsed = JSON.parse(raw) as Partial<Scenario>;\n    return { ...defaultScenario(), ...parsed };\n  } catch {\n    return defaultScenario();\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 828, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/core/lenders.ts"],"sourcesContent":["import type { LoanType, Purpose, PropertyType, Scenario } from \"./scenarioTypes\";\n\nexport type LenderRule = {\n  id: string;\n  name: string;\n  tagline: string;\n\n  /** Which loan types this lender supports (e.g. DSCR) */\n  loanTypes: LoanType[];\n\n  /** Which purposes this lender supports (Purchase / Refi / CashOutRefi) */\n  purposes: Purpose[];\n\n  // --- Hard constraints (baseline / generic) ---\n  minFico: number;\n\n  /** Default max LTV if a more specific rule isn't provided */\n  maxLtv: number;\n\n  /** Optional: max LTV by purpose */\n  maxLtvByPurpose?: Partial<Record<Purpose, number>>;\n\n  /** Optional: cash-out max LTV tiers by FICO (evaluated highest minFico first) */\n  cashOutMaxLtvByFico?: { minFico: number; maxLtv: number; note?: string }[];\n\n  excludedStates?: string[];\n\n  allowedPropertyTypes?: PropertyType[];\n  disallowInterestOnly?: boolean;\n\n  /** Condo overlay (only used when propertyType === Condo) */\n  condoNonWarrantableMaxLtv?: number;\n\n  /** V1.5 market overlay */\n  decliningMarketLtvHit?: number; // subtract from max eligible LTV if scenario.decliningMarket === true\n\n  // --- DSCR constraints ---\n  /** Baseline DSCR minimum (if no tiers apply) */\n  minDscr?: number;\n\n  /** Optional: DSCR tiers by LTV (useful for \"Expanded\" style programs) */\n  dscrTiers?: { maxLtv: number; minDscr: number; note?: string }[];\n\n  /** Optional: STR overlay */\n  strMinDscr?: number;\n\n  // --- Base pricing (simple, realistic placeholders for V1.5) ---\n  baseRate: number;   // percent, e.g. 7.875\n  basePoints: number; // points, e.g. 1.25\n\n  // --- Pricing adjustments (rateAdd in percent; pointsAdd in points) ---\n  adjustments: {\n    ltv: { max: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    fico: { min: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    dscr?: { min: number; rateAdd: number; pointsAdd: number; note?: string }[];\n    state?: { states: string[]; rateAdd: number; pointsAdd: number; note?: string }[];\n    io?: { when: \"Yes\" | \"No\"; rateAdd: number; pointsAdd: number; note?: string }[];\n    ppp?: { term: number; rateAdd: number; pointsAdd: number; note?: string }[];\n  };\n\n  strengths: string[];\n  avoidWhen: string[];\n};\n\n/**\n * Built-in reference lenders for V1.5.\n *\n * IMPORTANT:\n * - These are NOT \"live pricing\". They are reference configurations to validate the engine.\n * - Next step (forward vision): move these configs into Supabase and version them by effective date.\n */\nexport const lenders: LenderRule[] = [\n  {\n    id: \"bpl_standard\",\n    name: \"BPL – Standard\",\n    tagline: \"Conservative DSCR lane with simple overlays.\",\n    loanTypes: [\"DSCR\"],\n    purposes: [\"Purchase\", \"Refi\", \"CashOutRefi\"],\n\n    minFico: 680,\n\n    // Default caps\n    maxLtv: 80,\n    maxLtvByPurpose: {\n      Purchase: 80,\n      Refi: 80,\n      CashOutRefi: 75,\n    },\n    // Cash-out tiers by FICO (mirrors common sheet behavior)\n    cashOutMaxLtvByFico: [\n      { minFico: 700, maxLtv: 75, note: \"Cash-out tier (700+)\" },\n      { minFico: 680, maxLtv: 70, note: \"Cash-out tier (<700)\" },\n    ],\n\n    excludedStates: [],\n    allowedPropertyTypes: [\"SFR\", \"Condo\", \"2-4Unit\"],\n    disallowInterestOnly: false,\n\n    condoNonWarrantableMaxLtv: 70, // Standard is typically tighter on condos (placeholder)\n    decliningMarketLtvHit: 5,\n\n    // DSCR requirement: based on FICO (simplified from sheet language)\n    minDscr: 1.2, // for <720\n    // We'll enforce 1.0 for 720+ inside the engine notes/logic.\n\n    baseRate: 8.250,\n    basePoints: 1.25,\n\n    adjustments: {\n      ltv: [\n        { max: 65, rateAdd: -0.125, pointsAdd: -0.25, note: \"Low LTV credit\" },\n        { max: 70, rateAdd: 0.0, pointsAdd: 0.0 },\n        { max: 75, rateAdd: 0.125, pointsAdd: 0.25 },\n        { max: 80, rateAdd: 0.250, pointsAdd: 0.50, note: \"High LTV add\" },\n      ],\n      fico: [\n        { min: 760, rateAdd: -0.125, pointsAdd: -0.25 },\n        { min: 720, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 700, rateAdd: 0.125, pointsAdd: 0.25 },\n        { min: 680, rateAdd: 0.250, pointsAdd: 0.50 },\n      ],\n      dscr: [\n        { min: 1.35, rateAdd: -0.100, pointsAdd: -0.10 },\n        { min: 1.20, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 1.00, rateAdd: 0.100, pointsAdd: 0.10 },\n      ],\n      state: [],\n      io: [\n        { when: \"Yes\", rateAdd: 0.125, pointsAdd: 0.25, note: \"Interest-only add\" },\n        { when: \"No\", rateAdd: 0.0, pointsAdd: 0.0 },\n      ],\n      // PPP: base assumes 5-year; 3-year adds rate (from sheet language). Keep others neutral for now.\n      ppp: [\n        { term: 5, rateAdd: 0.0, pointsAdd: 0.0, note: \"Base assumes 5-yr PPP\" },\n        { term: 3, rateAdd: 0.375, pointsAdd: 0.0, note: \"3-yr PPP add\" },\n      ],\n    },\n\n    strengths: [\"Straightforward DSCR lane\", \"Predictable overlays\", \"Good for clean deals\"],\n    avoidWhen: [\"Borderline DSCR with high LTV\", \"Tight condos / special property types\"],\n  },\n\n  {\n    id: \"bpl_expanded\",\n    name: \"BPL – Expanded\",\n    tagline: \"More flexible DSCR with tiered DSCR and overlays.\",\n    loanTypes: [\"DSCR\"],\n    purposes: [\"Purchase\", \"Refi\", \"CashOutRefi\"],\n\n    minFico: 660,\n\n    maxLtv: 80,\n    maxLtvByPurpose: {\n      Purchase: 80,\n      Refi: 80,\n      CashOutRefi: 75,\n    },\n\n    excludedStates: [\"ND\", \"NV\", \"SD\"],\n    allowedPropertyTypes: [\"SFR\", \"Condo\", \"2-4Unit\"],\n    disallowInterestOnly: false,\n\n    condoNonWarrantableMaxLtv: 65,\n    decliningMarketLtvHit: 5,\n\n    // DSCR tiers by LTV (Expanded-style behavior)\n    dscrTiers: [\n      { maxLtv: 65, minDscr: 0.75, note: \"≤65 LTV DSCR tier\" },\n      { maxLtv: 80, minDscr: 1.0, note: \"65.01–80 LTV DSCR tier\" },\n    ],\n    strMinDscr: 1.15,\n\n    baseRate: 7.875,\n    basePoints: 1.75,\n\n    adjustments: {\n      ltv: [\n        { max: 65, rateAdd: -0.125, pointsAdd: -0.25, note: \"Low LTV credit\" },\n        { max: 70, rateAdd: 0.0, pointsAdd: 0.0 },\n        { max: 75, rateAdd: 0.125, pointsAdd: 0.25 },\n        { max: 80, rateAdd: 0.250, pointsAdd: 0.50, note: \"High LTV add\" },\n      ],\n      fico: [\n        { min: 760, rateAdd: -0.125, pointsAdd: -0.25 },\n        { min: 720, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 700, rateAdd: 0.125, pointsAdd: 0.25 },\n        { min: 660, rateAdd: 0.250, pointsAdd: 0.50 },\n      ],\n      dscr: [\n        { min: 1.35, rateAdd: -0.100, pointsAdd: -0.10 },\n        { min: 1.15, rateAdd: 0.0, pointsAdd: 0.0 },\n        { min: 1.00, rateAdd: 0.100, pointsAdd: 0.10 },\n        { min: 0.75, rateAdd: 0.200, pointsAdd: 0.20, note: \"Low DSCR add\" },\n      ],\n      state: [\n        { states: [\"NY\", \"NJ\"], rateAdd: 0.05, pointsAdd: 0.05, note: \"State add (example)\" },\n      ],\n      io: [\n        { when: \"Yes\", rateAdd: 0.125, pointsAdd: 0.25, note: \"Interest-only add\" },\n        { when: \"No\", rateAdd: 0.0, pointsAdd: 0.0 },\n      ],\n      ppp: [\n        { term: 5, rateAdd: 0.0, pointsAdd: 0.0, note: \"Base assumes 5-yr PPP\" },\n        { term: 3, rateAdd: 0.250, pointsAdd: 0.0, note: \"3-yr PPP add\" },\n        { term: 2, rateAdd: 0.375, pointsAdd: 0.0, note: \"2-yr PPP add\" },\n        { term: 1, rateAdd: 0.500, pointsAdd: 0.0, note: \"1-yr PPP add\" },\n      ],\n    },\n\n    strengths: [\"Tiered DSCR options\", \"STR capable (with higher DSCR)\", \"More flexible overlays\"],\n    avoidWhen: [\"Excluded states (ND/NV/SD)\", \"Non-warrantable condos over 65 LTV\"],\n  },\n];\n\n/** Helper used in the engine: compute max eligible LTV for a lender given a scenario. */\nexport function maxEligibleLtvForScenario(l: LenderRule, s: Scenario): { maxLtv: number; notes: string[] } {\n  const notes: string[] = [];\n\n  let maxLtv = l.maxLtvByPurpose?.[s.purpose] ?? l.maxLtv;\n\n  // Cash-out tiers by FICO (if provided)\n  if (s.purpose === \"CashOutRefi\" && l.cashOutMaxLtvByFico?.length) {\n    const rows = [...l.cashOutMaxLtvByFico].sort((a, b) => b.minFico - a.minFico);\n    const row = rows.find((r) => s.fico >= r.minFico) ?? rows[rows.length - 1];\n    maxLtv = Math.min(maxLtv, row.maxLtv);\n    if (row.note) notes.push(row.note);\n  }\n\n  // Condo overlay: non-warrantable cap\n  if (s.propertyType === \"Condo\" && !s.condoWarrantable && typeof l.condoNonWarrantableMaxLtv === \"number\") {\n    maxLtv = Math.min(maxLtv, l.condoNonWarrantableMaxLtv);\n    notes.push(`Non-warrantable condo max LTV ${l.condoNonWarrantableMaxLtv}%`);\n  }\n\n  // Declining market overlay: reduce LTV cap\n  if (s.decliningMarket && typeof l.decliningMarketLtvHit === \"number\" && l.decliningMarketLtvHit > 0) {\n    maxLtv = Math.max(0, maxLtv - l.decliningMarketLtvHit);\n    notes.push(`Declining market: −${l.decliningMarketLtvHit}% max LTV`);\n  }\n\n  return { maxLtv, notes };\n}\n\n/** Helper used in the engine: compute DSCR minimum for a lender given a scenario. */\nexport function minDscrForScenario(l: LenderRule, s: Scenario): { minDscr: number; notes: string[] } {\n  const notes: string[] = [];\n\n  // STR overlay\n  if (s.isSTR && typeof l.strMinDscr === \"number\") {\n    notes.push(`STR min DSCR ${l.strMinDscr}`);\n    return { minDscr: l.strMinDscr, notes };\n  }\n\n  // Tiered DSCR by LTV\n  if (l.dscrTiers?.length) {\n    const row =\n      l.dscrTiers.find((t) => s.ltv <= t.maxLtv) ??\n      l.dscrTiers[l.dscrTiers.length - 1];\n\n    if (row.note) notes.push(row.note);\n    return { minDscr: row.minDscr, notes };\n  }\n\n  // BPL Standard special: 720+ lowers DSCR requirement (captured here without custom functions)\n  if (l.id === \"bpl_standard\") {\n    if (s.fico >= 720) return { minDscr: 1.0, notes: [\"FICO 720+ DSCR tier\"] };\n    return { minDscr: 1.2, notes: [\"FICO <720 DSCR tier\"] };\n  }\n\n  return { minDscr: l.minDscr ?? 0, notes };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1241, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/core/engine.ts"],"sourcesContent":["import type { Scenario } from \"./scenarioTypes\";\nimport type { LenderRule } from \"./lenders\";\nimport { maxEligibleLtvForScenario, minDscrForScenario } from \"./lenders\";\n\nexport type PricingBreakdownRow = {\n  label: string;\n  rateDelta: number;\n  pointsDelta: number;\n  note?: string;\n};\n\nexport type PricingResult = {\n  lenderId: string;\n  lenderName: string;\n\n  eligible: boolean;\n\n  // Base + adjustments (only meaningful when eligible)\n  baseRate: number;\n  basePoints: number;\n  rate: number;\n  points: number;\n\n  breakdown: PricingBreakdownRow[];\n\n  // Notes always available; for ineligible results these are disqualifiers.\n  notes: string[];\n};\n\nfunction matchLtvAdj(rule: LenderRule, ltv: number) {\n  const row =\n    rule.adjustments.ltv.find((r) => ltv <= r.max) ??\n    rule.adjustments.ltv[rule.adjustments.ltv.length - 1];\n  return row;\n}\n\nfunction matchFicoAdj(rule: LenderRule, fico: number) {\n  const rows = [...rule.adjustments.fico].sort((a, b) => b.min - a.min);\n  const row = rows.find((r) => fico >= r.min) ?? rows[rows.length - 1];\n  return row;\n}\n\nfunction matchDscrAdj(rule: LenderRule, dscr: number) {\n  const rows = (rule.adjustments.dscr ?? []).slice().sort((a, b) => b.min - a.min);\n  const row = rows.find((r) => dscr >= r.min);\n  return row ?? null;\n}\n\nfunction matchStateAdj(rule: LenderRule, state: string) {\n  const rows = rule.adjustments.state ?? [];\n  return rows.find((r) => r.states.includes(state.toUpperCase())) ?? null;\n}\n\nfunction matchPppAdj(rule: LenderRule, term: number) {\n  const rows = rule.adjustments.ppp ?? [];\n  return rows.find((r) => r.term === term) ?? null;\n}\n\nexport function evaluateScenario(s: Scenario, lenderRules: LenderRule[]): PricingResult[] {\n  const state = (s.state || \"\").toUpperCase();\n\n  const results: PricingResult[] = lenderRules.map((l) => {\n    const notes: string[] = [];\n    let eligible = true;\n\n    // --- Eligibility checks (deterministic) ---\n    if (!l.loanTypes.includes(s.loanType)) {\n      eligible = false;\n      notes.push(\"Loan type not offered\");\n    }\n\n    if (eligible && !l.purposes.includes(s.purpose)) {\n      eligible = false;\n      notes.push(\"Purpose not offered\");\n    }\n\n    if (eligible && s.fico < l.minFico) {\n      eligible = false;\n      notes.push(`FICO < ${l.minFico}`);\n    }\n\n    if (eligible && l.allowedPropertyTypes?.length && !l.allowedPropertyTypes.includes(s.propertyType)) {\n      eligible = false;\n      notes.push(\"Property type not allowed\");\n    }\n\n    // max LTV (with overlays)\n    const { maxLtv, notes: maxLtvNotes } = maxEligibleLtvForScenario(l, s);\n    if (eligible) notes.push(...maxLtvNotes);\n    if (eligible && s.ltv > maxLtv) {\n      eligible = false;\n      notes.push(`LTV > ${maxLtv}`);\n    }\n\n    if (eligible && l.excludedStates?.includes(state)) {\n      eligible = false;\n      notes.push(`State excluded (${state})`);\n    }\n\n    if (eligible && l.disallowInterestOnly && s.interestOnly) {\n      eligible = false;\n      notes.push(\"Interest-only not allowed\");\n    }\n\n    // DSCR\n    if (eligible && s.loanType === \"DSCR\") {\n      const { minDscr, notes: dscrNotes } = minDscrForScenario(l, s);\n      notes.push(...dscrNotes);\n      if (s.dscr < minDscr) {\n        eligible = false;\n        notes.push(`DSCR ${s.dscr.toFixed(2)} < ${minDscr.toFixed(2)}`);\n      }\n    }\n\n    // Ineligible: return with only notes\n    if (!eligible) {\n      return {\n        lenderId: l.id,\n        lenderName: l.name,\n        eligible: false,\n        baseRate: l.baseRate,\n        basePoints: l.basePoints,\n        rate: l.baseRate,\n        points: l.basePoints,\n        breakdown: [],\n        notes,\n      };\n    }\n\n    // --- Pricing (base + simple adjustments) ---\n    const breakdown: PricingBreakdownRow[] = [];\n    let rate = l.baseRate;\n    let points = l.basePoints;\n\n    const addRow = (label: string, rateDelta: number, pointsDelta: number, note?: string) => {\n      if (rateDelta === 0 && pointsDelta === 0 && !note) return;\n      breakdown.push({ label, rateDelta, pointsDelta, note });\n      rate += rateDelta;\n      points += pointsDelta;\n    };\n\n    // LTV band\n    const ltvAdj = matchLtvAdj(l, s.ltv);\n    addRow(\"LTV band\", ltvAdj.rateAdd, ltvAdj.pointsAdd, ltvAdj.note);\n\n    // FICO tier\n    const ficoAdj = matchFicoAdj(l, s.fico);\n    addRow(\"FICO tier\", ficoAdj.rateAdd, ficoAdj.pointsAdd, ficoAdj.note);\n\n    // DSCR tier (if provided)\n    if (s.loanType === \"DSCR\") {\n      const dscrAdj = matchDscrAdj(l, s.dscr);\n      if (dscrAdj) addRow(\"DSCR tier\", dscrAdj.rateAdd, dscrAdj.pointsAdd, dscrAdj.note);\n    }\n\n    // State add (optional)\n    const stateAdj = matchStateAdj(l, state);\n    if (stateAdj) addRow(\"State\", stateAdj.rateAdd, stateAdj.pointsAdd, stateAdj.note);\n\n    // IO add (optional)\n    const ioRows = l.adjustments.io ?? [];\n    const ioAdj = ioRows.find((r) => r.when === (s.interestOnly ? \"Yes\" : \"No\")) ?? null;\n    if (ioAdj) addRow(\"Interest-only\", ioAdj.rateAdd, ioAdj.pointsAdd, ioAdj.note);\n\n    // PPP add (optional; only apply when PPP is not None)\n    if (s.prepayType !== \"None\") {\n      const pppAdj = matchPppAdj(l, s.prepayTerm);\n      if (pppAdj) addRow(\"PPP term\", pppAdj.rateAdd, pppAdj.pointsAdd, pppAdj.note);\n    }\n\n    // Round for presentation\n    rate = Math.round(rate * 1000) / 1000;\n    points = Math.round(points * 1000) / 1000;\n\n    // Notes: keep eligibility notes + pricing context\n    const pricingNotes: string[] = [];\n    if (s.prepayType === \"None\") pricingNotes.push(\"No PPP selected\");\n    else pricingNotes.push(`${s.prepayType} PPP, ${s.prepayTerm}yr`);\n\n    return {\n      lenderId: l.id,\n      lenderName: l.name,\n      eligible: true,\n      baseRate: l.baseRate,\n      basePoints: l.basePoints,\n      rate,\n      points,\n      breakdown,\n      notes: [...notes, ...pricingNotes],\n    };\n  });\n\n  // Eligible first, then best rate, then points\n  const eligible = results.filter((r) => r.eligible).sort((a, b) => a.rate - b.rate || a.points - b.points);\n  const ineligible = results.filter((r) => !r.eligible).sort((a, b) => a.lenderName.localeCompare(b.lenderName));\n  return [...eligible, ...ineligible];\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1406, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/lib/lendersStore.ts"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { lenders as builtInLenders, type LenderRule } from \"@/core/lenders\";\n\nconst STORAGE_KEY = \"loancursor.customLenders.v2\";\n\nfunction safeParse(jsonStr: string): unknown {\n  try { return JSON.parse(jsonStr); } catch { return null; }\n}\n\nexport function loadCustomLenders(): LenderRule[] {\n  if (typeof window === \"undefined\") return [];\n  const raw = window.localStorage.getItem(STORAGE_KEY);\n  if (!raw) return [];\n  const parsed = safeParse(raw);\n  if (!Array.isArray(parsed)) return [];\n  // Light validation: only keep objects with id + name\n  return parsed.filter((x) => x && typeof x === \"object\" && typeof (x as any).id === \"string\" && typeof (x as any).name === \"string\") as LenderRule[];\n}\n\nexport function saveCustomLenders(lenders: LenderRule[]) {\n  if (typeof window === \"undefined\") return;\n  window.localStorage.setItem(STORAGE_KEY, JSON.stringify(lenders));\n}\n\nexport function getAllLenders(): LenderRule[] {\n  // Built-ins first (stable ordering), with optional custom overrides by the same id.\n  // Any remaining custom lenders (ids not in built-ins) are appended.\n  const customs = loadCustomLenders();\n  const byId = new Map(customs.map((l) => [l.id, l] as const));\n  const builtIds = new Set(builtInLenders.map((l) => l.id));\n\n  const mergedBuiltIns = builtInLenders.map((l) => byId.get(l.id) ?? l);\n  const extraCustoms = customs.filter((l) => !builtIds.has(l.id));\n  return [...mergedBuiltIns, ...extraCustoms];\n}\n\nexport function useLenders() {\n  const [customs, setCustoms] = React.useState<LenderRule[]>([]);\n  React.useEffect(() => {\n    setCustoms(loadCustomLenders());\n  }, []);\n\n  const all = React.useMemo(() => {\n    const byId = new Map(customs.map((l) => [l.id, l] as const));\n    const builtIds = new Set(builtInLenders.map((l) => l.id));\n    const mergedBuiltIns = builtInLenders.map((l) => byId.get(l.id) ?? l);\n    const extraCustoms = customs.filter((l) => !builtIds.has(l.id));\n    return [...mergedBuiltIns, ...extraCustoms];\n  }, [customs]);\n\n  const setAllCustoms = React.useCallback((next: LenderRule[] | ((prev: LenderRule[]) => LenderRule[])) => {\n    setCustoms((prev) => {\n      const resolved = typeof next === \"function\" ? (next as any)(prev) : next;\n      saveCustomLenders(resolved);\n      return resolved;\n    });\n  }, []);\n\n  return { lenders: all, customLenders: customs, setCustomLenders: setAllCustoms };\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;;AAHA;;;AAKA,MAAM,cAAc;AAEpB,SAAS,UAAU,OAAe;IAChC,IAAI;QAAE,OAAO,KAAK,KAAK,CAAC;IAAU,EAAE,OAAM;QAAE,OAAO;IAAM;AAC3D;AAEO,SAAS;IACd;;IACA,MAAM,MAAM,OAAO,YAAY,CAAC,OAAO,CAAC;IACxC,IAAI,CAAC,KAAK,OAAO,EAAE;IACnB,MAAM,SAAS,UAAU;IACzB,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS,OAAO,EAAE;IACrC,qDAAqD;IACrD,OAAO,OAAO,MAAM,CAAC,CAAC,IAAM,KAAK,OAAO,MAAM,YAAY,OAAO,AAAC,EAAU,EAAE,KAAK,YAAY,OAAO,AAAC,EAAU,IAAI,KAAK;AAC5H;AAEO,SAAS,kBAAkB,OAAqB;IACrD;;IACA,OAAO,YAAY,CAAC,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;AAC1D;AAEO,SAAS;IACd,oFAAoF;IACpF,oEAAoE;IACpE,MAAM,UAAU;IAChB,MAAM,OAAO,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAM;YAAC,EAAE,EAAE;YAAE;SAAE;IACjD,MAAM,WAAW,IAAI,IAAI,6HAAc,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;IAEvD,MAAM,iBAAiB,6HAAc,CAAC,GAAG,CAAC,CAAC,IAAM,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK;IACnE,MAAM,eAAe,QAAQ,MAAM,CAAC,CAAC,IAAM,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE;IAC7D,OAAO;WAAI;WAAmB;KAAa;AAC7C;AAEO,SAAS;;IACd,MAAM,CAAC,SAAS,WAAW,GAAG,yKAAc,CAAe,EAAE;IAC7D,0KAAe;gCAAC;YACd,WAAW;QACb;+BAAG,EAAE;IAEL,MAAM,MAAM,wKAAa;mCAAC;YACxB,MAAM,OAAO,IAAI,IAAI,QAAQ,GAAG;2CAAC,CAAC,IAAM;wBAAC,EAAE,EAAE;wBAAE;qBAAE;;YACjD,MAAM,WAAW,IAAI,IAAI,6HAAc,CAAC,GAAG;2CAAC,CAAC,IAAM,EAAE,EAAE;;YACvD,MAAM,iBAAiB,6HAAc,CAAC,GAAG;0DAAC,CAAC,IAAM,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK;;YACnE,MAAM,eAAe,QAAQ,MAAM;wDAAC,CAAC,IAAM,CAAC,SAAS,GAAG,CAAC,EAAE,EAAE;;YAC7D,OAAO;mBAAI;mBAAmB;aAAa;QAC7C;kCAAG;QAAC;KAAQ;IAEZ,MAAM,gBAAgB,4KAAiB;iDAAC,CAAC;YACvC;yDAAW,CAAC;oBACV,MAAM,WAAW,OAAO,SAAS,aAAa,AAAC,KAAa,QAAQ;oBACpE,kBAAkB;oBAClB,OAAO;gBACT;;QACF;gDAAG,EAAE;IAEL,OAAO;QAAE,SAAS;QAAK,eAAe;QAAS,kBAAkB;IAAc;AACjF;GAvBgB"}},
    {"offset": {"line": 1519, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/GitHub/LoanCursor/app/%28app%29/pricing/page.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\nimport { Card } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\n\nimport { CurrencyInput } from \"@/components/CurrencyInput\";\nimport { PercentInput } from \"@/components/PercentInput\";\nimport type { Scenario } from \"@/core/scenarioTypes\";\nimport {\n  defaultScenario,\n  saveScenario,\n  validateScenario,\n} from \"@/core/scenarioStore\";\nimport { evaluateScenario } from \"@/core/engine\";\nimport { useLenders } from \"@/lib/lendersStore\";\nimport { Home, User, Users, CheckCircle2, XCircle, Sparkles } from \"lucide-react\";\n\nconst US_STATES = [\n  [\"AL\", \"Alabama\"],\n  [\"AK\", \"Alaska\"],\n  [\"AZ\", \"Arizona\"],\n  [\"AR\", \"Arkansas\"],\n  [\"CA\", \"California\"],\n  [\"CO\", \"Colorado\"],\n  [\"CT\", \"Connecticut\"],\n  [\"DE\", \"Delaware\"],\n  [\"DC\", \"District of Columbia\"],\n  [\"FL\", \"Florida\"],\n  [\"GA\", \"Georgia\"],\n  [\"HI\", \"Hawaii\"],\n  [\"ID\", \"Idaho\"],\n  [\"IL\", \"Illinois\"],\n  [\"IN\", \"Indiana\"],\n  [\"IA\", \"Iowa\"],\n  [\"KS\", \"Kansas\"],\n  [\"KY\", \"Kentucky\"],\n  [\"LA\", \"Louisiana\"],\n  [\"ME\", \"Maine\"],\n  [\"MD\", \"Maryland\"],\n  [\"MA\", \"Massachusetts\"],\n  [\"MI\", \"Michigan\"],\n  [\"MN\", \"Minnesota\"],\n  [\"MS\", \"Mississippi\"],\n  [\"MO\", \"Missouri\"],\n  [\"MT\", \"Montana\"],\n  [\"NE\", \"Nebraska\"],\n  [\"NV\", \"Nevada\"],\n  [\"NH\", \"New Hampshire\"],\n  [\"NJ\", \"New Jersey\"],\n  [\"NM\", \"New Mexico\"],\n  [\"NY\", \"New York\"],\n  [\"NC\", \"North Carolina\"],\n  [\"ND\", \"North Dakota\"],\n  [\"OH\", \"Ohio\"],\n  [\"OK\", \"Oklahoma\"],\n  [\"OR\", \"Oregon\"],\n  [\"PA\", \"Pennsylvania\"],\n  [\"RI\", \"Rhode Island\"],\n  [\"SC\", \"South Carolina\"],\n  [\"SD\", \"South Dakota\"],\n  [\"TN\", \"Tennessee\"],\n  [\"TX\", \"Texas\"],\n  [\"UT\", \"Utah\"],\n  [\"VT\", \"Vermont\"],\n  [\"VA\", \"Virginia\"],\n  [\"WA\", \"Washington\"],\n  [\"WV\", \"West Virginia\"],\n  [\"WI\", \"Wisconsin\"],\n  [\"WY\", \"Wyoming\"],\n] as const;\n\nfunction Field({\n  label,\n  action,\n  children,\n}: {\n  label: string;\n  action?: React.ReactNode;\n  children: React.ReactNode;\n}) {\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center justify-between gap-3\">\n        <div className=\"text-xs font-medium text-muted-foreground\">{label}</div>\n        {action}\n      </div>\n      {children}\n    </div>\n  );\n}\n\nfunction clamp(n: number, min: number, max: number) {\n  if (!Number.isFinite(n)) return min;\n  return Math.min(max, Math.max(min, n));\n}\n\n// Monthly PI payment\nfunction monthlyPayment({\n  principal,\n  ratePct,\n  termYears,\n  interestOnly,\n}: {\n  principal: number;\n  ratePct: number;\n  termYears: number;\n  interestOnly: boolean;\n}) {\n  const r = ratePct / 100 / 12;\n  if (principal <= 0 || r <= 0) return 0;\n  if (interestOnly) return principal * r;\n\n  const n = termYears * 12;\n  return (principal * r) / (1 - Math.pow(1 + r, -n));\n}\n\n/**\n * Broker-standard DSCR:\n *   DSCR = Rent / PITIA\n *   PITIA = PI + Taxes + HOI + HOA\n */\nfunction calcDSCR({\n  rentMonthly,\n  taxAnnual,\n  hoiAnnual,\n  hoaMonthly,\n  paymentMonthly,\n}: {\n  rentMonthly: number;\n  taxAnnual: number;\n  hoiAnnual: number;\n  hoaMonthly: number;\n  paymentMonthly: number;\n}) {\n  const taxesMonthly = (taxAnnual || 0) / 12;\n  const hoiMonthly = (hoiAnnual || 0) / 12;\n  const pitia =\n    (paymentMonthly || 0) +\n    taxesMonthly +\n    hoiMonthly +\n    (hoaMonthly || 0);\n\n  if (pitia <= 0) return 0;\n  return (rentMonthly || 0) / pitia;\n}\n\nfunction derivedPPPLabel(type: Scenario[\"prepayType\"], term: number) {\n  if (type === \"None\") return \"No prepay\";\n  if (!Number.isFinite(term) || term < 1) return \"\";\n  if (type === \"Stepdown\") {\n    return Array.from({ length: term }, (_, i) => String(term - i)).join(\"-\");\n  }\n  // Fixed\n  return Array.from({ length: term }, () => String(term)).join(\"-\");\n}\n\nconst inputBase =\n  \"h-10 w-full rounded-md border border-border bg-background px-3 py-2 text-sm text-foreground shadow-sm transition \" +\n  \"placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-indigo-600/40 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50\";\n\ntype EngineRow = ReturnType<typeof evaluateScenario>[number];\n\nexport default function PricingPage() {\n  const { lenders } = useLenders();\n\n  const [scenario, setScenario] = React.useState<Scenario>(() =>\n    defaultScenario()\n  );\n  const [error, setError] = React.useState<string | null>(null);\n\n  // Results-on-right state\n  const [ranOnce, setRanOnce] = React.useState(false);\n  const [results, setResults] = React.useState<EngineRow[] | null>(null);\n  const resultsTopRef = React.useRef<HTMLDivElement | null>(null);\n\n  const [ficoDraft, setFicoDraft] = React.useState<string>(() =>\n    String(defaultScenario().fico)\n  );\n  React.useEffect(() => {\n    setFicoDraft(String(scenario.fico ?? \"\"));\n  }, [scenario.fico]);\n\n  /**\n   * Single source of truth update()\n   * - Keeps PV/Loan/LTV synced\n   * - Recomputes DSCR immediately on ANY change that impacts it\n   */\n  function update<K extends keyof Scenario>(key: K, value: Scenario[K]) {\n    setScenario((s) => {\n      const next: Scenario = { ...s, [key]: value } as Scenario;\n\n      // --- Keep LTV, loan amount, and value in sync ---\n      if (\n        (key === \"loanAmount\" || key === \"propertyValue\") &&\n        next.propertyValue > 0\n      ) {\n        next.ltv = clamp(\n          (next.loanAmount / next.propertyValue) * 100,\n          0.01,\n          100\n        );\n      }\n\n      if (key === \"ltv\" && next.propertyValue > 0) {\n        next.loanAmount = clamp(\n          (next.propertyValue * next.ltv) / 100,\n          0,\n          next.propertyValue\n        );\n      }\n\n      // If Interest-Only is turned off, clear IO structure.\n      if (key === \"interestOnly\" && !next.interestOnly) {\n        next.ioYears = undefined;\n      }\n\n      // --- Recompute DSCR immediately ---\n      const payment = monthlyPayment({\n        principal: next.loanAmount || 0,\n        ratePct: next.qualifyingRate || 0,\n        termYears: next.amortizationYears || 30,\n        interestOnly: !!next.interestOnly,\n      });\n\n      next.dscr = calcDSCR({\n        rentMonthly: next.rentMonthly || 0,\n        taxAnnual: next.propertyTaxAnnual || 0,\n        hoiAnnual: (next as any).hoiAnnual || 0,\n        hoaMonthly: next.hoaMonthly || 0,\n        paymentMonthly: payment,\n      });\n\n      return next;\n    });\n  }\n\n  const selectedSet = React.useMemo(\n    () => new Set(scenario.selectedLenderIds),\n    [scenario.selectedLenderIds]\n  );\n\n  const lenderPreview = React.useMemo(\n    () => evaluateScenario(scenario, lenders),\n    [scenario, lenders]\n  );\n\n  const lenderPreviewMap = React.useMemo(() => {\n    const m = new Map<string, { eligible: boolean; notes: string[] }>();\n    lenderPreview.forEach((r) =>\n      m.set(r.lenderId, { eligible: r.eligible, notes: r.notes })\n    );\n    return m;\n  }, [lenderPreview]);\n\n  const eligibleCount = React.useMemo(\n    () => lenderPreview.filter((r) => r.eligible).length,\n    [lenderPreview]\n  );\n\n  function setUseAllLenders(checked: boolean | \"indeterminate\") {\n    update(\"useAllLenders\", checked === true);\n    if (checked !== true && scenario.selectedLenderIds.length === 0) {\n      update(\"selectedLenderIds\", lenders.map((l) => l.id) as any);\n    }\n  }\n\n  function toggleLender(id: string, checked: boolean | \"indeterminate\") {\n    const next = new Set(scenario.selectedLenderIds);\n    if (checked) next.add(id);\n    else next.delete(id);\n    update(\"selectedLenderIds\", Array.from(next) as any);\n  }\n\n  // Keep prepay term sane when enabled\n  React.useEffect(() => {\n    if (scenario.prepayType === \"None\") return;\n    if (\n      !Number.isFinite(scenario.prepayTerm) ||\n      scenario.prepayTerm < 1 ||\n      scenario.prepayTerm > 7\n    ) {\n      update(\"prepayTerm\", 5 as any);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [scenario.prepayType]);\n\n  // Display helpers (PI + PITIA)\n  const payment = React.useMemo(() => {\n    return monthlyPayment({\n      principal: scenario.loanAmount || 0,\n      ratePct: scenario.qualifyingRate || 0,\n      termYears: scenario.amortizationYears || 30,\n      interestOnly: !!scenario.interestOnly,\n    });\n  }, [\n    scenario.loanAmount,\n    scenario.qualifyingRate,\n    scenario.amortizationYears,\n    scenario.interestOnly,\n  ]);\n\n  const taxesMonthly = React.useMemo(\n    () => (scenario.propertyTaxAnnual || 0) / 12,\n    [scenario.propertyTaxAnnual]\n  );\n  const hoiMonthly = React.useMemo(\n    () => ((scenario as any).hoiAnnual || 0) / 12,\n    [(scenario as any).hoiAnnual]\n  );\n  const pitia = React.useMemo(\n    () => payment + taxesMonthly + hoiMonthly + (scenario.hoaMonthly || 0),\n    [payment, taxesMonthly, hoiMonthly, scenario.hoaMonthly]\n  );\n\n  function scrollToResultsTop() {\n    // give React a moment to paint results first\n    requestAnimationFrame(() => {\n      resultsTopRef.current?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n      });\n    });\n  }\n\n  function onRun() {\n    const v = validateScenario(scenario);\n    if (!v.ok) {\n      setError(v.error);\n      return;\n    }\n\n    setError(null);\n    saveScenario(scenario);\n\n    const rows = evaluateScenario(scenario, lenders);\n\n    // If user is in manual selection mode, filter to selected lenders only\n    const filtered =\n      scenario.useAllLenders\n        ? rows\n        : rows.filter((r) => selectedSet.has(r.lenderId));\n\n    // Sort: eligible first, then by name (stable)\n    const sorted = [...filtered].sort((a, b) => {\n      if (a.eligible !== b.eligible) return a.eligible ? -1 : 1;\n      const an = lenders.find((x) => x.id === a.lenderId)?.name ?? \"\";\n      const bn = lenders.find((x) => x.id === b.lenderId)?.name ?? \"\";\n      return an.localeCompare(bn);\n    });\n\n    setRanOnce(true);\n    setResults(sorted);\n    scrollToResultsTop();\n  }\n\n  const resultsEligible = React.useMemo(\n    () => (results ? results.filter((r) => r.eligible).length : 0),\n    [results]\n  );\n  const resultsIneligible = React.useMemo(\n    () => (results ? results.filter((r) => !r.eligible).length : 0),\n    [results]\n  );\n\n  return (\n    <div className=\"max-w-7xl mx-auto\">\n      {/* Top header */}\n      <div className=\"flex items-end justify-between gap-4\">\n        <div>\n          <div className=\"text-xs text-muted-foreground\">LoanCursor</div>\n          <h1 className=\"mt-2 text-2xl font-semibold tracking-tight text-foreground\">\n            Pricing\n          </h1>\n          <p className=\"mt-2 text-muted-foreground leading-relaxed max-w-2xl\">\n            Enter a scenario on the left. Run pricing to populate eligibility +\n            notes on the right.\n          </p>\n        </div>\n\n        {/* Top run/reset (desktop) */}\n        <div className=\"hidden md:flex items-center gap-3\">\n          <Button className=\"rounded-md\" onClick={onRun}>\n            Run Pricing\n          </Button>\n          <Button\n            variant=\"secondary\"\n            className=\"rounded-md\"\n            onClick={() => {\n              const s = defaultScenario();\n              setScenario(s);\n              saveScenario(s);\n              setError(null);\n              setRanOnce(false);\n              setResults(null);\n            }}\n          >\n            Reset\n          </Button>\n        </div>\n      </div>\n\n      {/* Split layout */}\n      <div className=\"mt-6 grid gap-6 lg:grid-cols-12\">\n        {/* LEFT: Inputs */}\n        <Card className=\"lg:col-span-7 rounded-xl border border-border bg-card p-6\">\n          <Tabs defaultValue=\"deal\" className=\"space-y-6\">\n            <TabsList className=\"grid w-full grid-cols-2 md:grid-cols-3\">\n              <TabsTrigger value=\"deal\" className=\"gap-2\">\n                <Home className=\"h-4 w-4\" /> Deal\n              </TabsTrigger>\n              <TabsTrigger value=\"borrower\" className=\"gap-2\">\n                <User className=\"h-4 w-4\" /> Borrower\n              </TabsTrigger>\n              <TabsTrigger value=\"lenders\" className=\"gap-2\">\n                <Users className=\"h-4 w-4\" /> Lenders\n              </TabsTrigger>\n            </TabsList>\n\n            {/* Deal */}\n            <TabsContent value=\"deal\">\n              <div className=\"space-y-6\">\n                <Card className=\"p-5\">\n                  <div>\n                    <div className=\"text-sm font-semibold text-foreground\">\n                      Deal basics\n                    </div>\n                    <div className=\"mt-1 text-xs text-muted-foreground\">\n                      Quick identifiers that commonly drive eligibility and\n                      pricing.\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                    <Field label=\"Loan program\">\n                      <Select\n                        value={scenario.loanType}\n                        onValueChange={(v) => update(\"loanType\", v as any)}\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"DSCR\">DSCR</SelectItem>\n                          <SelectItem value=\"BankStatement\">\n                            Bank Statement\n                          </SelectItem>\n                          <SelectItem value=\"NonQM\">Non-QM</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </Field>\n\n                    <Field label=\"Purpose\">\n                      <Select\n                        value={scenario.purpose}\n                        onValueChange={(v) => update(\"purpose\", v as any)}\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"Purchase\">Purchase</SelectItem>\n                          <SelectItem value=\"Refi\">Rate/Term Refi</SelectItem>\n                          <SelectItem value=\"CashOutRefi\">\n                            Cash-Out Refi\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </Field>\n\n                    <Field label=\"State\">\n                      <Select\n                        value={scenario.state}\n                        onValueChange={(v) => update(\"state\", v as any)}\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select state\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border max-h-[320px]\">\n                          {US_STATES.map(([abbr, name]) => (\n                            <SelectItem key={abbr} value={abbr}>\n                              {abbr} — {name}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </Field>\n\n                    <Field label=\"Occupancy\">\n                      <Select\n                        value={scenario.occupancy}\n                        onValueChange={(v) => update(\"occupancy\", v as any)}\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"Primary\">Primary</SelectItem>\n                          <SelectItem value=\"SecondHome\">\n                            Second Home\n                          </SelectItem>\n                          <SelectItem value=\"Investment\">\n                            Investment\n                          </SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </Field>\n\n                    <Field label=\"Property type\">\n                      <Select\n                        value={scenario.propertyType}\n                        onValueChange={(v) => {\n                          const pt = v as Scenario[\"propertyType\"];\n                          setScenario((s) => ({\n                            ...s,\n                            propertyType: pt,\n                            unitCount:\n                              pt === \"2-4Unit\"\n                                ? [2, 3, 4].includes(Number(s.unitCount))\n                                  ? s.unitCount\n                                  : 2\n                                : s.unitCount,\n                          }));\n                        }}\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"SFR\">SFR</SelectItem>\n                          <SelectItem value=\"Condo\">Condo</SelectItem>\n                          <SelectItem value=\"2-4Unit\">2–4 Unit</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </Field>\n\n                    {scenario.propertyType === \"2-4Unit\" ? (\n                      <Field label=\"Units\">\n                        <Select\n                          value={String(scenario.unitCount || 2)}\n                          onValueChange={(v) =>\n                            update(\"unitCount\", Number(v) as any)\n                          }\n                        >\n                          <SelectTrigger className={inputBase}>\n                            <SelectValue placeholder=\"Select\" />\n                          </SelectTrigger>\n                          <SelectContent className=\"bg-card border-border\">\n                            <SelectItem value=\"2\">2</SelectItem>\n                            <SelectItem value=\"3\">3</SelectItem>\n                            <SelectItem value=\"4\">4</SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </Field>\n                    ) : (\n                      <div />\n                    )}\n\n                    {scenario.propertyType === \"Condo\" ? (\n                      <Field label=\"Condo\">\n                        <Select\n                          value={\n                            scenario.condoWarrantable\n                              ? \"Warrantable\"\n                              : \"NonWarrantable\"\n                          }\n                          onValueChange={(v) =>\n                            update(\n                              \"condoWarrantable\",\n                              (v === \"Warrantable\") as any\n                            )\n                          }\n                        >\n                          <SelectTrigger className={inputBase}>\n                            <SelectValue placeholder=\"Select\" />\n                          </SelectTrigger>\n                          <SelectContent className=\"bg-card border-border\">\n                            <SelectItem value=\"Warrantable\">\n                              Warrantable\n                            </SelectItem>\n                            <SelectItem value=\"NonWarrantable\">\n                              Non-warrantable\n                            </SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </Field>\n                    ) : (\n                      <div />\n                    )}\n\n                    <Field label=\"Lien position\">\n                      <Select\n                        value={scenario.lienPosition}\n                        onValueChange={(v) =>\n                          update(\"lienPosition\", v as any)\n                        }\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"First\">First lien</SelectItem>\n                          <SelectItem value=\"Second\">Second lien</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </Field>\n\n                    <Field label=\"Borrower type\">\n                      <Select\n                        value={scenario.entity}\n                        onValueChange={(v) => update(\"entity\", v as any)}\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"Individual\">\n                            Individual\n                          </SelectItem>\n                          <SelectItem value=\"Entity\">Entity</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </Field>\n                  </div>\n                </Card>\n\n                <Card className=\"p-5\">\n                  <div>\n                    <div className=\"text-sm font-semibold text-foreground\">\n                      Sizing\n                    </div>\n                    <div className=\"mt-1 text-xs text-muted-foreground\">\n                      Enter the minimum set needed to run pricing/eligibility\n                      checks.\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                    <Field label=\"Property value\">\n                      <CurrencyInput\n                        value={scenario.propertyValue}\n                        onChange={(n) =>\n                          update(\"propertyValue\", n as any)\n                        }\n                      />\n                    </Field>\n\n                    <Field label=\"Loan amount\">\n                      <CurrencyInput\n                        value={scenario.loanAmount}\n                        onChange={(n) => update(\"loanAmount\", n as any)}\n                      />\n                    </Field>\n\n                    <Field label=\"LTV\">\n                      <PercentInput\n                        value={scenario.ltv}\n                        onChange={(n) => update(\"ltv\", n as any)}\n                        className={inputBase}\n                      />\n                    </Field>\n\n                    <Field label=\"FICO\">\n                      <Input\n                        className={inputBase}\n                        value={String(scenario.fico)}\n                        inputMode=\"numeric\"\n                        onKeyDown={(e) => {\n                          if (e.key === \"Enter\")\n                            (e.currentTarget as HTMLInputElement).blur();\n                        }}\n                        onChange={(e) =>\n                          update(\"fico\", Number(e.target.value || 0) as any)\n                        }\n                        placeholder=\"720\"\n                      />\n                    </Field>\n\n                    <Field label=\"Reserves (months)\">\n                      <Input\n                        className={inputBase}\n                        value={\n                          scenario.reservesMonths == null\n                            ? \"\"\n                            : String(scenario.reservesMonths)\n                        }\n                        inputMode=\"numeric\"\n                        onKeyDown={(e) => {\n                          if (e.key === \"Enter\")\n                            (e.currentTarget as HTMLInputElement).blur();\n                        }}\n                        onChange={(e) => {\n                          const raw = e.target.value;\n                          update(\n                            \"reservesMonths\",\n                            (raw === \"\" ? undefined : Number(raw)) as any\n                          );\n                        }}\n                        placeholder=\"Optional (e.g. 6)\"\n                      />\n                    </Field>\n                  </div>\n                </Card>\n\n                <Card className=\"p-5\">\n                  <div>\n                    <div className=\"text-sm font-semibold text-foreground\">\n                      Loan terms\n                    </div>\n                    <div className=\"mt-1 text-xs text-muted-foreground\">\n                      These often change pricing on DSCR/Non-QM programs.\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                    <Field label=\"Amortization (years)\">\n                      <Select\n                        value={String(scenario.amortizationYears)}\n                        onValueChange={(v) =>\n                          update(\"amortizationYears\", Number(v) as any)\n                        }\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"30\">30</SelectItem>\n                          <SelectItem value=\"40\">40</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </Field>\n\n                    <Field label=\"Interest-only\">\n                      <Select\n                        value={scenario.interestOnly ? \"Yes\" : \"No\"}\n                        onValueChange={(v) =>\n                          update(\"interestOnly\", (v === \"Yes\") as any)\n                        }\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"No\">No</SelectItem>\n                          <SelectItem value=\"Yes\">Yes</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <div className=\"mt-1 text-xs text-muted-foreground\">\n                        If Yes, choose the IO structure below.\n                      </div>\n                    </Field>\n\n                    {scenario.interestOnly ? (\n                      <Field label=\"IO structure\">\n                        <Select\n                          value={String(scenario.ioYears ?? 10)}\n                          onValueChange={(v) =>\n                            update(\"ioYears\", Number(v) as any)\n                          }\n                        >\n                          <SelectTrigger className={inputBase}>\n                            <SelectValue placeholder=\"Select\" />\n                          </SelectTrigger>\n                          <SelectContent className=\"bg-card border-border\">\n                            <SelectItem value=\"5\">5/30 IO</SelectItem>\n                            <SelectItem value=\"7\">7/30 IO</SelectItem>\n                            <SelectItem value=\"10\">10/30 IO</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <div className=\"mt-1 text-xs text-muted-foreground\">\n                          Common IO periods used by DSCR lenders.\n                        </div>\n                      </Field>\n                    ) : (\n                      <div />\n                    )}\n\n                    <Field label=\"Prepay type\">\n                      <Select\n                        value={scenario.prepayType}\n                        onValueChange={(v) =>\n                          update(\"prepayType\", v as any)\n                        }\n                      >\n                        <SelectTrigger className={inputBase}>\n                          <SelectValue placeholder=\"Select\" />\n                        </SelectTrigger>\n                        <SelectContent className=\"bg-card border-border\">\n                          <SelectItem value=\"None\">None</SelectItem>\n                          <SelectItem value=\"Stepdown\">Stepdown</SelectItem>\n                          <SelectItem value=\"Fixed\">Fixed</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </Field>\n\n                    {scenario.prepayType !== \"None\" ? (\n                      <Field label=\"Prepay term (years)\">\n                        <Select\n                          value={String(scenario.prepayTerm)}\n                          onValueChange={(v) =>\n                            update(\"prepayTerm\", Number(v) as any)\n                          }\n                        >\n                          <SelectTrigger className={inputBase}>\n                            <SelectValue placeholder=\"Select\" />\n                          </SelectTrigger>\n                          <SelectContent className=\"bg-card border-border\">\n                            {[1, 2, 3, 4, 5, 6, 7].map((n) => (\n                              <SelectItem key={n} value={String(n)}>\n                                {n}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <div className=\"mt-1 text-[11px] text-muted-foreground\">\n                          Example:{\" \"}\n                          {derivedPPPLabel(\n                            scenario.prepayType,\n                            scenario.prepayTerm\n                          )}\n                        </div>\n                      </Field>\n                    ) : (\n                      <div />\n                    )}\n\n                    <Field label=\"Overlays\">\n                      <div className=\"space-y-2 rounded-md border border-border bg-background px-3 py-2.5\">\n                        <label className=\"flex items-center gap-2\">\n                          <Checkbox\n                            checked={scenario.isSTR}\n                            onCheckedChange={(v) =>\n                              update(\"isSTR\", !!v as any)\n                            }\n                          />\n                          <span className=\"text-sm text-foreground\">\n                            Short-term rental (STR)\n                          </span>\n                        </label>\n                        <label className=\"flex items-center gap-2\">\n                          <Checkbox\n                            checked={scenario.decliningMarket}\n                            onCheckedChange={(v) =>\n                              update(\"decliningMarket\", !!v as any)\n                            }\n                          />\n                          <span className=\"text-sm text-foreground\">\n                            Declining market\n                          </span>\n                        </label>\n                      </div>\n                    </Field>\n                  </div>\n                </Card>\n\n                <Card className=\"p-5\">\n                  <div>\n                    <div className=\"text-sm font-semibold text-foreground\">\n                      Income & DSCR\n                    </div>\n                    <div className=\"mt-1 text-xs text-muted-foreground\">\n                      DSCR uses PITIA = PI + Taxes + HOI + HOA.\n                    </div>\n                  </div>\n\n                  <div className=\"mt-4 grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                    <Field label=\"Monthly rent\">\n                      <CurrencyInput\n                        value={scenario.rentMonthly}\n                        onChange={(n) => update(\"rentMonthly\", n as any)}\n                      />\n                    </Field>\n\n                    <Field label=\"Annual property taxes\">\n                      <CurrencyInput\n                        value={scenario.propertyTaxAnnual}\n                        onChange={(n) =>\n                          update(\"propertyTaxAnnual\", n as any)\n                        }\n                      />\n                    </Field>\n\n                    <Field label=\"Annual HOI (homeowners insurance)\">\n                      <CurrencyInput\n                        value={(scenario as any).hoiAnnual || 0}\n                        onChange={(n) => update(\"hoiAnnual\" as any, n as any)}\n                      />\n                    </Field>\n\n                    <Field label=\"Monthly HOA\">\n                      <CurrencyInput\n                        value={scenario.hoaMonthly}\n                        onChange={(n) => update(\"hoaMonthly\", n as any)}\n                      />\n                    </Field>\n\n                    <Field label=\"Qualifying rate\">\n                      <PercentInput\n                        value={scenario.qualifyingRate}\n                        onChange={(n) =>\n                          update(\"qualifyingRate\", n as any)\n                        }\n                        className={inputBase}\n                      />\n                    </Field>\n\n                    <Field label=\"DSCR (calculated)\">\n                      <div className=\"rounded-md border border-border bg-muted/30 px-3 py-2.5\">\n                        <div className=\"text-xs text-muted-foreground\">\n                          DSCR = Rent / PITIA\n                        </div>\n                        <div className=\"mt-1 text-base font-semibold tabular-nums\">\n                          {Number.isFinite(scenario.dscr)\n                            ? scenario.dscr.toFixed(2)\n                            : \"--\"}\n                        </div>\n\n                        <div className=\"mt-2 grid grid-cols-2 gap-2 text-[11px] text-muted-foreground\">\n                          <div>\n                            <div className=\"uppercase tracking-wide\">PI</div>\n                            <div className=\"tabular-nums text-foreground/90\">\n                              {Number.isFinite(payment)\n                                ? `$${payment.toFixed(2)}`\n                                : \"--\"}\n                            </div>\n                          </div>\n                          <div>\n                            <div className=\"uppercase tracking-wide\">PITIA</div>\n                            <div className=\"tabular-nums text-foreground/90\">\n                              {Number.isFinite(pitia)\n                                ? `$${pitia.toFixed(2)}`\n                                : \"--\"}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </Field>\n                  </div>\n                </Card>\n              </div>\n            </TabsContent>\n\n            {/* Borrower */}\n            <TabsContent value=\"borrower\">\n              <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n                <Field label=\"Credit score (FICO)\">\n                  <Input\n                    inputMode=\"numeric\"\n                    value={ficoDraft}\n                    onChange={(e) => {\n                      const next = e.target.value.replace(/[^\\d]/g, \"\");\n                      setFicoDraft(next);\n                    }}\n                    onBlur={() => {\n                      const n = Number(ficoDraft);\n                      const clamped = Number.isFinite(n)\n                        ? clamp(n, 300, 850)\n                        : 300;\n                      update(\"fico\", clamped as any);\n                      setFicoDraft(String(clamped));\n                    }}\n                    placeholder=\"e.g. 720\"\n                    className={inputBase}\n                  />\n                </Field>\n\n                <Field label=\"Entity\">\n                  <Select\n                    value={scenario.entity}\n                    onValueChange={(v) =>\n                      update(\"entity\", v as Scenario[\"entity\"])\n                    }\n                  >\n                    <SelectTrigger className={inputBase}>\n                      <SelectValue placeholder=\"Select\" />\n                    </SelectTrigger>\n                    <SelectContent className=\"bg-card border-border\">\n                      <SelectItem value=\"Individual\">Individual</SelectItem>\n                      <SelectItem value=\"Entity\">Entity</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </Field>\n\n                <div className=\"lg:col-span-3 md:col-span-2\">\n                  <div className=\"rounded-md border border-border bg-muted/30 p-4 text-sm text-muted-foreground\">\n                    Add borrower eligibility fields here next (bank statements,\n                    reserves, DTI, etc.).\n                  </div>\n                </div>\n              </div>\n            </TabsContent>\n\n            {/* Lenders */}\n            <TabsContent value=\"lenders\">\n              <div className=\"rounded-xl border border-border bg-muted/30 p-5\">\n                <div className=\"flex items-start justify-between gap-4\">\n                  <div>\n                    <div className=\"text-sm font-medium text-foreground\">\n                      Lender selection\n                    </div>\n                    <p className=\"mt-1 text-sm text-muted-foreground\">\n                      Choose whether this scenario runs against{\" \"}\n                      <span className=\"text-foreground\">all lenders</span> or\n                      only a selected subset.\n                    </p>\n                  </div>\n\n                  <div className=\"flex flex-wrap items-center gap-3\">\n                    <Button\n                      variant=\"secondary\"\n                      className=\"rounded-md\"\n                      onClick={() => {\n                        update(\n                          \"selectedLenderIds\",\n                          lenders.map((l) => l.id) as any\n                        );\n                        update(\"useAllLenders\", false as any);\n                      }}\n                    >\n                      Select all\n                    </Button>\n                    <Button\n                      variant=\"secondary\"\n                      className=\"rounded-md\"\n                      onClick={() => {\n                        update(\"selectedLenderIds\", [] as any);\n                        update(\"useAllLenders\", false as any);\n                      }}\n                    >\n                      Clear\n                    </Button>\n                  </div>\n                </div>\n\n                <div className=\"mt-4 flex items-center gap-3\">\n                  <Checkbox\n                    checked={scenario.useAllLenders}\n                    onCheckedChange={setUseAllLenders}\n                  />\n                  <div className=\"text-sm text-foreground\">Use all lenders</div>\n                  {!scenario.useAllLenders && (\n                    <div className=\"space-y-1\">\n                      <div className=\"text-xs text-muted-foreground\">\n                        Eligible right now: {eligibleCount}/{lenders.length}\n                      </div>\n                      <div className=\"text-xs text-muted-foreground\">\n                        Selected: {scenario.selectedLenderIds.length}\n                      </div>\n                    </div>\n                  )}\n                </div>\n\n                {!scenario.useAllLenders && (\n                  <div className=\"mt-4 grid gap-2 md:grid-cols-2\">\n                    {lenders.map((l) => {\n                      const checked = selectedSet.has(l.id);\n                      const p = lenderPreviewMap.get(l.id);\n                      return (\n                        <label\n                          key={l.id}\n                          className=\"flex items-start gap-3 rounded-md border border-border bg-muted/30 p-3 hover:bg-muted/30 transition\"\n                        >\n                          <Checkbox\n                            checked={checked}\n                            onCheckedChange={(c) =>\n                              toggleLender(l.id, c === true)\n                            }\n                          />\n                          <div className=\"min-w-0\">\n                            <div className=\"text-sm font-medium text-foreground truncate\">\n                              {l.name}\n                            </div>\n                            <div className=\"text-xs text-muted-foreground line-clamp-2\">\n                              {l.tagline}\n                            </div>\n                            <div className=\"mt-2 flex flex-wrap items-center gap-2\">\n                              {p?.eligible ? (\n                                <span className=\"text-[11px] rounded-full bg-emerald-500/10 text-emerald-200 border border-emerald-500/20 px-2 py-0.5\">\n                                  Eligible\n                                </span>\n                              ) : (\n                                <span className=\"text-[11px] rounded-full bg-rose-500/10 text-rose-200 border border-rose-500/20 px-2 py-0.5\">\n                                  Ineligible\n                                </span>\n                              )}\n                              <span className=\"text-[11px] text-muted-foreground\">\n                                Loan types: {l.loanTypes.join(\", \")} · Purposes:{\" \"}\n                                {l.purposes.join(\", \")}\n                              </span>\n                            </div>\n                          </div>\n                        </label>\n                      );\n                    })}\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n          </Tabs>\n\n          {error && (\n            <div className=\"mt-4 text-sm text-rose-300\">{error}</div>\n          )}\n\n          {/* Bottom buttons (always visible at end of left panel) */}\n          <div className=\"mt-6 flex flex-wrap items-center gap-3\">\n            <Button className=\"rounded-md\" onClick={onRun}>\n              Run Pricing\n            </Button>\n            <Button\n              variant=\"secondary\"\n              className=\"rounded-md\"\n              onClick={() => {\n                const s = defaultScenario();\n                setScenario(s);\n                saveScenario(s);\n                setError(null);\n                setRanOnce(false);\n                setResults(null);\n              }}\n            >\n              Reset\n            </Button>\n            <div className=\"text-xs text-muted-foreground\">\n              Phase 1 is deterministic rules (no AI, no uploads).\n            </div>\n          </div>\n        </Card>\n\n        {/* RIGHT: Results */}\n        <Card className=\"lg:col-span-5 rounded-xl border border-border bg-card p-6\">\n          <div ref={resultsTopRef} />\n\n          <div className=\"flex items-start justify-between gap-3\">\n            <div>\n              <div className=\"text-sm font-semibold text-foreground\">\n                Results\n              </div>\n              <div className=\"mt-1 text-xs text-muted-foreground\">\n                Eligible / ineligible + notes (rule-based).\n              </div>\n            </div>\n\n            {results ? (\n              <div className=\"text-xs text-muted-foreground tabular-nums\">\n                <span className=\"text-emerald-200\">{resultsEligible} eligible</span>\n                <span className=\"mx-2\">•</span>\n                <span className=\"text-rose-200\">{resultsIneligible} ineligible</span>\n              </div>\n            ) : (\n              <div className=\"text-xs text-muted-foreground\">\n                Not run yet\n              </div>\n            )}\n          </div>\n\n          {!ranOnce ? (\n            <div className=\"mt-5 rounded-lg border border-border bg-muted/30 p-4\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"mt-0.5\">\n                  <Sparkles className=\"h-4 w-4 text-muted-foreground\" />\n                </div>\n                <div>\n                  <div className=\"text-sm font-medium text-foreground\">\n                    Ready when you are\n                  </div>\n                  <div className=\"mt-1 text-sm text-muted-foreground\">\n                    Run pricing to populate this panel.\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : results && results.length === 0 ? (\n            <div className=\"mt-5 rounded-lg border border-border bg-muted/30 p-4 text-sm text-muted-foreground\">\n              No lenders in scope (check “Use all lenders” or select some).\n            </div>\n          ) : (\n            <div className=\"mt-5 space-y-3\">\n              {(results ?? []).map((r) => {\n                const lender = lenders.find((l) => l.id === r.lenderId);\n                const name = lender?.name ?? r.lenderId;\n\n                return (\n                  <div\n                    key={r.lenderId}\n                    className=\"rounded-lg border border-border bg-muted/20 p-4\"\n                  >\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <div className=\"min-w-0\">\n                        <div className=\"text-sm font-semibold text-foreground truncate\">\n                          {name}\n                        </div>\n                        <div className=\"mt-1 text-xs text-muted-foreground\">\n                          {lender?.tagline ?? \"\"}\n                        </div>\n                      </div>\n\n                      {r.eligible ? (\n                        <div className=\"flex items-center gap-1 text-emerald-200 text-xs\">\n                          <CheckCircle2 className=\"h-4 w-4\" />\n                          Eligible\n                        </div>\n                      ) : (\n                        <div className=\"flex items-center gap-1 text-rose-200 text-xs\">\n                          <XCircle className=\"h-4 w-4\" />\n                          Ineligible\n                        </div>\n                      )}\n                    </div>\n\n                    {r.notes?.length ? (\n                      <ul className=\"mt-3 space-y-1 text-sm text-muted-foreground\">\n                        {r.notes.slice(0, 6).map((n, idx) => (\n                          <li key={idx} className=\"leading-relaxed\">\n                            • {n}\n                          </li>\n                        ))}\n                      </ul>\n                    ) : (\n                      <div className=\"mt-3 text-sm text-muted-foreground\">\n                        No notes.\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n\n          <div className=\"mt-6 text-xs text-muted-foreground\">\n            Next: add “pricing outputs” (rate/points) once your engine returns those fields.\n          </div>\n        </Card>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}